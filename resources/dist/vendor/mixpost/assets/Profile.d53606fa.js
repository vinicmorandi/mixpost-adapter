import{S as D,o as n,c as m,F as y,a2 as S,k as x,a as o,w as e,h as i,t,b as s,e as a,f as b,_ as V,cc as ie,J as O,W as de,T as E,g as le,n as ae,i as Q,a3 as ue,H as w,O as ce,ag as me,ae as oe,m as fe,A as G,p as re,d as _e,Z as pe,q as ve}from"./app.a05b4c5c.js";import{_ as ge}from"./Minimal.e0a95d9a.js";import{_ as R}from"./Radio.cc3f4ee6.js";import{_ as te}from"./Select.f675cc46.js";import{_ as k}from"./HorizontalGroup.97d4c34e.js";import{_ as F}from"./Error.4aa59f2e.js";import{_ as N}from"./Input.44809a08.js";import{_ as T}from"./Flex.513e8e8d.js";import{_ as J}from"./InputHidden.3ebb63fe.js";import{_ as he}from"./Panel.05e9bba5.js";import{_ as we}from"./PageHeader.044c6731.js";import"./PureButton.7cf07808.js";import"./Eye.bdca2e42.js";const $e=["value"],be={key:0,class:"text-xs text-gray-500 mt-xs block"},ye={class:"font-medium"},ke=["label"],xe=["value"],Ce={class:"flex items-center space-x-sm"},Ve={class:"flex items-center space-x-sm"},Le={__name:"Preferences",props:{form:{type:Object,require:!0},locales:{type:Array,required:!0},timezone_list:{type:Object,required:!0}},setup(d){const r=d,h=D(),{t:l}=h,u=g=>r.locales.find(v=>v.long===g).direction||"ltr",$=g=>!["en-GB","fr-CA","ar-SA","de-DE","es-MX"].includes(g),{notify:p}=O(),f=()=>{r.form.put(route("mixpost.profile.updatePreferences"),{preserveScroll:!0,onSuccess(){ie.changeLocale(h,r.form.locale,u(r.form.locale)),p("success",l("profile.preferences_updated"))}})};return(g,v)=>(n(),m("div",null,[(n(!0),m(y,null,S(d.form.errors,c=>(n(),x(F,{message:c,class:"mb-xs"},null,8,["message"]))),256)),o(k,null,{title:e(()=>[i(t(s(l)("general.language")),1)]),default:e(()=>[a("div",null,[o(te,{modelValue:d.form.locale,"onUpdate:modelValue":v[0]||(v[0]=c=>d.form.locale=c)},{default:e(()=>[(n(!0),m(y,null,S(d.locales,c=>(n(),m("option",{value:c.long},t(c.english)+" - "+t(c.native)+" - ("+t(c.long)+") "+t($(c.long)?"[Beta]":""),9,$e))),256))]),_:1},8,["modelValue"]),$(d.form.locale)?(n(),m("span",be,[i(" \u{1F6A7} Language "),a("span",ye,t(d.form.locale),1),i(" is in beta and may not be fully translated or can contain errors. ")])):b("",!0)])]),_:1}),o(k,{class:"mt-lg"},{title:e(()=>[i(t(s(l)("general.timezone")),1)]),default:e(()=>[a("div",null,[o(te,{modelValue:d.form.timezone,"onUpdate:modelValue":v[1]||(v[1]=c=>d.form.timezone=c)},{default:e(()=>[(n(!0),m(y,null,S(d.timezone_list,(c,L)=>(n(),m("optgroup",{label:L},[(n(!0),m(y,null,S(c,(P,U)=>(n(),m("option",{value:U},t(P),9,xe))),256))],8,ke))),256))]),_:1},8,["modelValue"])])]),_:1}),o(k,{class:"mt-lg"},{title:e(()=>[i(t(s(l)("profile.time_format")),1)]),default:e(()=>[a("div",Ce,[a("label",null,[o(R,{checked:d.form.time_format,"onUpdate:checked":v[2]||(v[2]=c=>d.form.time_format=c),value:12},null,8,["checked"]),i(" 12 "+t(s(l)("profile.hour")),1)]),a("label",null,[o(R,{checked:d.form.time_format,"onUpdate:checked":v[3]||(v[3]=c=>d.form.time_format=c),value:24},null,8,["checked"]),i(" 24 "+t(s(l)("profile.hour")),1)])])]),_:1}),o(k,{class:"mt-lg"},{title:e(()=>[i(t(s(l)("profile.first_day_week")),1)]),default:e(()=>[a("div",Ve,[a("label",null,[o(R,{checked:d.form.week_starts_on,"onUpdate:checked":v[4]||(v[4]=c=>d.form.week_starts_on=c),value:0},null,8,["checked"]),i(" "+t(s(l)("profile.sunday")),1)]),a("label",null,[o(R,{checked:d.form.week_starts_on,"onUpdate:checked":v[5]||(v[5]=c=>d.form.week_starts_on=c),value:1},null,8,["checked"]),i(" "+t(s(l)("profile.monday")),1)])])]),_:1}),o(V,{onClick:f,class:"mt-lg"},{default:e(()=>[i(t(s(l)("general.save")),1)]),_:1})]))}},Se=["onSubmit"],Pe={for:"name"},Ue={for:"email"},Ae={__name:"UserAccount",setup(d){const{t:r}=D(),{user:h}=de(),{notify:l}=O(),u=E({name:h.value.name,email:h.value.email}),$=()=>{u.put(route("mixpost.profile.updateUser"),{preserveScroll:!0,onSuccess(){l("success",r("account.account_updated"))}})};return(p,f)=>(n(),m("form",{onSubmit:le($,["prevent"])},[(n(!0),m(y,null,S(s(u).errors,g=>(n(),x(F,{message:g,class:"mb-xs"},null,8,["message"]))),256)),o(k,null,{title:e(()=>[a("label",Pe,t(s(r)("general.name")),1)]),default:e(()=>[o(N,{type:"text",modelValue:s(u).name,"onUpdate:modelValue":f[0]||(f[0]=g=>s(u).name=g),error:s(u).errors.name,id:"name"},null,8,["modelValue","error"])]),_:1}),o(k,{class:"mt-lg"},{title:e(()=>[a("label",Ue,t(s(r)("general.email")),1)]),default:e(()=>[o(N,{type:"email",modelValue:s(u).email,"onUpdate:modelValue":f[1]||(f[1]=g=>s(u).email=g),error:s(u).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),o(V,{type:"submit",class:"mt-lg"},{default:e(()=>[i(t(s(r)("general.save")),1)]),_:1})],40,Se))}},Be={for:"password"},Ie={__name:"ConfirmPassword",props:{show:{type:Boolean,default:!0}},emits:["close","confirm"],setup(d,{emit:r}){const h=ae("routePrefix"),l=()=>{r("close")},u=E({password:""}),$=()=>{u.post(route(`${h}.profile.confirmPassword`),{preserveScroll:!0,onSuccess(){r("confirm"),u.reset(),l()}})};return(p,f)=>(n(),x(ue,{show:d.show,"max-width":"lg",closeable:!0,"scrollable-body":!0,onClose:l},{header:e(()=>[i(t(p.$t("auth.confirm_password")),1)]),body:e(()=>[d.show?(n(),m(y,{key:0},[a("div",null,t(p.$t("profile.security_confirm_password")),1),o(k,{class:"mt-lg"},{title:e(()=>[a("label",Be,t(p.$t("auth.password")),1)]),footer:e(()=>[o(F,{message:s(u).errors.password},null,8,["message"])]),default:e(()=>[o(N,{modelValue:s(u).password,"onUpdate:modelValue":f[0]||(f[0]=g=>s(u).password=g),error:s(u).errors.password,type:"password",id:"password",class:"w-full",autocomplete:"password"},null,8,["modelValue","error"])]),_:1})],64)):b("",!0)]),footer:e(()=>[o(Q,{onClick:l,class:"mr-xs"},{default:e(()=>[i(t(p.$t("general.cancel")),1)]),_:1}),o(V,{onClick:$,disabled:s(u).processing,isLoading:s(u).processing,class:"mr-xs"},{default:e(()=>[i(t(p.$t("general.confirm")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"]))}},ze={class:"mt-lg"},je={key:0,class:"mt-lg"},qe=["innerHTML"],Re={class:"uppercase font-medium text-center"},Te={class:"text-gray-500"},Me={class:"mt-md"},Ne={for:"code"},De={key:1},Oe={key:0,class:"mt-lg"},Ee={class:"mt-xs bg-primary-50 rounded-lg p-md"},Fe={class:"mb-xs"},He={class:"font-medium"},Ge={__name:"TwoFactorAuth",setup(d){const{t:r}=D(),h=w({svg:"",secret_key:""}),l=w(!1),u=w(!1),$=w(""),p=w(!1),f=w(!1),g=w([]),v=w(!1),c=w(null),L=ae("routePrefix"),{notify:P}=O(),U=ce(()=>u.value?!1:me().props.user_has_two_factor_auth_enabled||l.value===!0),ne=()=>{v.value=!0},W=()=>{v.value=!1},B=w(!1),X=()=>{B.value=!0,axios.post(route(`${L}.profile.two-factor-auth.enable`)).then(_=>{p.value=!0,h.value=_.data}).catch(_=>A(_,X)).finally(()=>B.value=!1)},I=w(!1),Z=()=>{I.value=!0,axios.post(route(`${L}.profile.two-factor-auth.confirm`),{code:$.value}).then(_=>{l.value=!0,u.value=!1,p.value=!1,g.value=_.data.recovery_codes,f.value=!0,$.value="",P("success",r("profile.two_factor_enabled"))}).catch(_=>A(_,Z)).finally(()=>I.value=!1)},z=w(!1),Y=()=>{z.value=!0,axios.get(route(`${L}.profile.two-factor-auth.showRecoveryCodes`)).then(_=>{g.value=_.data.recovery_codes,f.value=!0}).catch(_=>A(_,Y)).finally(()=>z.value=!1)},j=w(!1),ee=()=>{j.value=!0,axios.post(route(`${L}.profile.two-factor-auth.regenerateRecoveryCodes`)).then(_=>{g.value=_.data.recovery_codes,f.value=!0}).catch(_=>A(_,ee)).finally(()=>j.value=!1)},q=w(!1),se=()=>{q.value=!0,axios.delete(route(`${L}.profile.two-factor-auth.disable`)).then(()=>{u.value=!0,P("success",r("profile.two_factor_disabled"))}).catch(_=>A(_,se)).finally(()=>q.value=!1)},A=(_,C)=>{if(_.response.status===422){_.response.data.errors.confirmation&&(c.value=C,ne()),_.response.data.errors.code&&P("error",_.response.data.errors.code[0]);return}P("error",r("error.something_wrong"))};return(_,C)=>(n(),m(y,null,[a("div",null,[a("div",null,t(s(r)("profile.install_totp")),1),a("div",ze,[s(U)?(n(),x(oe,{key:0,variant:"success"},{default:e(()=>[i(t(s(r)("general.enabled")),1)]),_:1})):b("",!0),s(U)?b("",!0):(n(),x(oe,{key:1,variant:"error"},{default:e(()=>[i(t(s(r)("general.disabled")),1)]),_:1}))]),p.value?(n(),m("div",je,[o(T,{class:"w-full relative rounded-lg border border-gray-200 p-xs"},{default:e(()=>[a("div",{innerHTML:h.value.svg},null,8,qe),o(T,{class:"justify-center items-center w-full"},{default:e(()=>[a("div",Re,[a("div",Te,t(s(r)("profile.secret_key")),1),a("div",null,t(h.value.secret_key),1)])]),_:1})]),_:1}),a("div",Me,t(s(r)("profile.scan_qr_code")),1),o(k,{class:"mt-lg"},{title:e(()=>[a("label",Ne,t(s(r)("profile.code")),1)]),default:e(()=>[o(N,{modelValue:$.value,"onUpdate:modelValue":C[0]||(C[0]=H=>$.value=H),type:"text",id:"code",class:"w-full",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(T,null,{default:e(()=>[o(V,{onClick:Z,disabled:I.value,isLoading:I.value,class:"mt-lg"},{default:e(()=>[i(t(s(r)("general.confirm")),1)]),_:1},8,["disabled","isLoading"]),o(Q,{onClick:C[1]||(C[1]=()=>{p.value=!1,$.value=""}),class:"mt-lg"},{default:e(()=>[i(t(s(r)("general.cancel")),1)]),_:1})]),_:1})])):b("",!0),s(U)?(n(),m("div",De,[f.value?(n(),m("div",Oe,[a("div",null,t(s(r)("profile.store_recovery_codes")),1),a("div",Ee,[(n(!0),m(y,null,S(g.value,H=>(n(),m("div",Fe,[a("div",He,t(H),1)]))),256))])])):b("",!0),o(T,{class:"mt-lg"},{default:e(()=>[f.value?(n(),x(V,{key:0,onClick:ee,disabled:j.value,isLoading:j.value},{default:e(()=>[i(t(s(r)("profile.regenerate_recovery_codes")),1)]),_:1},8,["disabled","isLoading"])):b("",!0),f.value?b("",!0):(n(),x(V,{key:1,onClick:Y,disabled:z.value,isLoading:z.value},{default:e(()=>[i(t(s(r)("profile.show_recovery_codes")),1)]),_:1},8,["disabled","isLoading"])),o(fe,{onClick:se,disabled:q.value,isLoading:q.value},{default:e(()=>[i(t(s(r)("general.disable")),1)]),_:1},8,["disabled","isLoading"])]),_:1})])):b("",!0),!s(U)&&!p.value?(n(),x(V,{key:2,onClick:X,disabled:B.value,isLoading:B.value,class:"mt-lg"},{default:e(()=>[i(t(s(r)("general.enable")),1)]),_:1},8,["disabled","isLoading"])):b("",!0)]),o(Ie,{show:v.value,onConfirm:C[2]||(C[2]=()=>{W(),c.value&&c.value()}),onClose:W},null,8,["show"])],64))}},Je=["onSubmit"],Ke={for:"current_password"},Qe={for:"password"},We={for:"password_confirmation"},Xe={__name:"Password",setup(d){const{t:r}=D(),{notify:h}=O(),l=E({current_password:"",password:"",password_confirmation:""}),u=()=>{l.put(route("mixpost.profile.updatePassword"),{preserveScroll:!0,onSuccess(){l.reset(),h("success",r("profile.password_changed"))}})};return($,p)=>(n(),m("form",{onSubmit:le(u,["prevent"])},[(n(!0),m(y,null,S(s(l).errors,f=>(n(),x(F,{message:f,class:"mb-xs"},null,8,["message"]))),256)),o(k,{class:"mt-lg"},{title:e(()=>[a("label",Ke,t(s(r)("profile.current_password")),1)]),default:e(()=>[o(J,{modelValue:s(l).current_password,"onUpdate:modelValue":p[0]||(p[0]=f=>s(l).current_password=f),error:s(l).errors.current_password,id:"current_password",required:""},null,8,["modelValue","error"])]),_:1}),o(k,{class:"mt-md"},{title:e(()=>[a("label",Qe,t(s(r)("profile.new_password")),1)]),default:e(()=>[o(J,{modelValue:s(l).password,"onUpdate:modelValue":p[1]||(p[1]=f=>s(l).password=f),error:s(l).errors.password,id:"password",autocomplete:"new-password",required:""},null,8,["modelValue","error"])]),_:1}),o(k,{class:"mt-md"},{title:e(()=>[a("label",We,t(s(r)("profile.confirm_new_password")),1)]),default:e(()=>[o(J,{modelValue:s(l).password_confirmation,"onUpdate:modelValue":p[2]||(p[2]=f=>s(l).password_confirmation=f),error:s(l).password_confirmationpassword,id:"password_confirmation",autocomplete:"new-password",required:""},null,8,["modelValue","error"])]),_:1}),o(V,{type:"submit",class:"mt-lg"},{default:e(()=>[i(t(s(r)("general.save")),1)]),_:1})],40,Je))}},Ze={class:"md:grid md:grid-cols-3 md:gap-lg"},Ye={class:"md:col-span-1 flex justify-between"},es={class:"text-lg font-medium text-gray-900"},ss={class:"mt-xs text-gray-500"},os={class:"mt-lg md:mt-0 md:col-span-2"},M={__name:"ActionSection",setup(d){return(r,h)=>(n(),m("div",Ze,[a("div",Ye,[a("div",null,[a("h3",es,[G(r.$slots,"title")]),a("p",ss,[G(r.$slots,"description")])])]),a("div",os,[o(he,null,{default:e(()=>[G(r.$slots,"default")]),_:3})])]))}},ts={},ls={class:"hidden sm:block"},as=a("div",{class:"py-xl"},[a("div",{class:"border-t border-gray-200"})],-1),rs=[as];function ns(d,r){return n(),m("div",ls,rs)}const K=re(ts,[["render",ns]]),is={},ds={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},us=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"},null,-1),cs=[us];function ms(d,r){return n(),m("svg",ds,cs)}const fs=re(is,[["render",ms]]),_s={class:"hidden sm:block"},ps={class:"row-py mb-2xl w-full mx-auto !pt-0"},vs={class:"w-full mb-lg"},gs={class:"mt-2xl sm:mt-0"},hs={class:"mt-2xl sm:mt-0"},ws={class:"mt-2xl sm:mt-0"},$s={class:"mt-2xl sm:mt-0"},bs=_e({layout:ge}),js=Object.assign(bs,{__name:"Profile",props:["settings","locales","timezone_list","user_has_two_factor_auth_enabled"],setup(d){const h=E(d.settings);return w("account"),(l,u)=>(n(),m(y,null,[o(s(pe),{title:l.$t("profile.edit_profile")},null,8,["title"]),o(we,{title:l.$t("profile.edit_profile"),class:"!px-0"},{default:e(()=>[o(s(ve),{href:l.route("mixpost.home"),class:"flex items-center link"},{default:e(()=>[o(Q,null,{default:e(()=>[o(fs,{class:"mr-xs"}),a("span",_s,t(l.$t("profile.back_dashboard")),1)]),_:1})]),_:1},8,["href"])]),_:1},8,["title"]),a("div",ps,[a("div",vs,[a("div",gs,[o(M,null,{title:e(()=>[i(t(l.$t("profile.profile_information")),1)]),description:e(()=>[i(t(l.$t("profile.update_your_account")),1)]),default:e(()=>[o(Ae)]),_:1})]),o(K),a("div",hs,[o(M,null,{title:e(()=>[i(t(l.$t("profile.preferences")),1)]),description:e(()=>[i(t(l.$t("profile.update_preferences")),1)]),default:e(()=>[o(Le,{form:s(h),timezone_list:d.timezone_list,locales:d.locales},null,8,["form","timezone_list","locales"])]),_:1})]),l.$page.props.is_two_factor_auth_enabled?(n(),m(y,{key:0},[o(K),a("div",ws,[o(M,null,{title:e(()=>[i(t(l.$t("auth.two_factor_authentication")),1)]),description:e(()=>[i(t(l.$t("auth.security_using_two_factor")),1)]),default:e(()=>[o(Ge)]),_:1})])],64)):b("",!0),o(K),a("div",$s,[o(M,null,{title:e(()=>[i(t(l.$t("auth.update_password")),1)]),description:e(()=>[i(t(l.$t("auth.confirm_secure_password")),1)]),default:e(()=>[o(Xe)]),_:1})])])])],64))}});export{js as default};
