import{S as q,n as C,H,r as J,o as d,c as b,e as g,j as K,b as a,k as y,w as e,a as t,a7 as A,ab as ee,h as l,t as r,a8 as te,ac as M,c5 as L,J as R,A as j,ae as z,c6 as ae,E as O,f as P,c7 as se,W as le,T as re,ag as N,i as F,a3 as oe,F as B,d as ne,a0 as ie,a5 as ue,a6 as de,Z as ce,q as me,_ as fe,au as E,a2 as _e}from"./app.a05b4c5c.js";import{_ as ge}from"./Admin.7fa4ba78.js";import{u as pe}from"./useSelectable.08fa8b7e.js";import{_ as he}from"./PageHeader.044c6731.js";import{_ as be}from"./PureDangerButton.9adab555.js";import{_ as $e}from"./Panel.05e9bba5.js";import{_ as U}from"./Checkbox.12b1be22.js";import{_,a as W,T as xe}from"./TableCell.8aafd44e.js";import{_ as ye}from"./SelectableBar.c8863131.js";import{_ as ve}from"./NoResult.b8d4ef7e.js";import{T as Z}from"./Trash.83ab4124.js";import{_ as ke}from"./DropdownButton.8d634dd9.js";import{_ as we}from"./PureButtonLink.21473f96.js";import{A as Se}from"./ArrowTopRightOnSquare.a67b2cfb.js";import{_ as T}from"./Input.44809a08.js";import{_ as w}from"./Error.4aa59f2e.js";import{V as S,_ as I}from"./LabelSuffix.20800baf.js";import{_ as Pe}from"./UploadButton.85a01342.js";import{_ as Ce}from"./Flex.513e8e8d.js";import"./PureButton.7cf07808.js";import"./EllipsisVertical.0bda3946.js";const Ve={class:"flex flex-row items-center justify-end gap-xs"},De={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(o,{emit:n}){const i=o,{t:u}=q(),p=C("routePrefix"),x=C("confirmation"),{notify:k}=R(),h=H(!1),s=()=>{x().title(u("page.delete_pages")).description(u("page.confirm_delete_pages")).destructive().onConfirm(f=>{f.isLoading(!0),M.delete(route(`${p}.pages.delete`,{page:i.itemId}),{onSuccess(){h.value=!1,k("success",u("page.page_deleted")),n("onDelete"),L.emit("pageDelete",i.itemId),f.reset()},onFinish(){f.close()}})}).show()};return(f,V)=>{const c=J("tooltip");return d(),b("div",null,[g("div",Ve,[K((d(),y(we,{href:f.route(`${a(p)}.pages.show`,{slug:o.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(Se)]),_:1},8,["href"])),[[c,a(u)("general.open")]]),t(te,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[t(ke)]),content:e(()=>[t(A,{href:f.route(`${a(p)}.pages.edit`,{page:o.itemId})},{default:e(()=>[t(ee,{class:"mr-xs"}),l(" "+r(a(u)("general.edit")),1)]),_:1},8,["href"]),t(A,{onClick:s,as:"button"},{default:e(()=>[t(Z,{class:"text-red-500 mr-xs"}),l(" "+r(a(u)("general.delete")),1)]),_:1})]),_:1})])])}}},Oe={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(o){return(n,i)=>(d(),y(W,{hoverable:!0},{default:e(()=>[t(_,{class:"w-10"},{default:e(()=>[j(n.$slots,"checkbox")]),_:3}),t(_,null,{default:e(()=>[l(r(o.item.name),1)]),_:1}),t(_,null,{default:e(()=>[l(r(o.item.slug),1)]),_:1}),t(_,null,{default:e(()=>[o.item.status?(d(),y(z,{key:0,variant:"success"},{default:e(()=>[l(r(n.$t("general.enabled")),1)]),_:1})):(d(),y(z,{key:1,variant:"error"},{default:e(()=>[l(r(n.$t("general.disabled")),1)]),_:1}))]),_:1}),t(_,null,{default:e(()=>[l(r(o.item.created_at),1)]),_:1}),t(_,null,{default:e(()=>[t(De,{itemId:o.item.uuid,urlPath:o.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Te=["type"],Ie={key:2,class:"absolute left-0 top-0 flex justify-center items-center w-full h-full bg-green-500"},G={__name:"SuccessButton",props:{type:{type:String,default:"button"},size:{type:String,default:"lg"},isLoading:{type:Boolean,default:!1},hiddenTextOnSmallScreen:{type:Boolean,default:!1}},setup(o){const n=o,{sizeClass:i}=ae(n.size);return(u,p)=>(d(),b("button",{type:o.type,class:O([a(i),"relative inline-flex items-center bg-green-500 border border-transparent rounded-md font-medium text-xs text-white uppercase tracking-widest hover:bg-green-700 active:bg-green-700 focus:border-green-700 focus:shadow-outline-green disabled:bg-green-400 transition ease-in-out duration-200"])},[u.$slots.icon?(d(),b("span",{key:0,class:O(["inline-flex",{"sm:mr-xs":u.$slots.default,"mr-0 sm:mr-xs":o.hiddenTextOnSmallScreen,"mr-xs":!o.hiddenTextOnSmallScreen&&u.$slots.default}])},[j(u.$slots,"icon")],2)):P("",!0),u.$slots.default?(d(),b("span",{key:1,class:O(["inline-flex items-center",{"hidden sm:inline":o.hiddenTextOnSmallScreen}])},[j(u.$slots,"default")],2)):P("",!0),o.isLoading?(d(),b("span",Ie,[t(se,{class:"animate-spin text-white"})])):P("",!0)],10,Te))}},Le={for:"brand_name"},je=["src"],Be={for:"brand_name"},Ue={for:"email"},qe={for:"register_url"},Re={class:"ml-xs"},Ae={__name:"GeneratePageSamples",setup(o){const{t:n}=q(),i=C("routePrefix"),u=H(!1),p=()=>{u.value=!0},x=()=>{u.value=!1},{user:k}=le(),{notify:h}=R(),s=re({logo_url:N().props.mixpost.theme.logo,brand_name:N().props.app.name,email:k.value.email,register_url:"",destroy:!1}),f=()=>{s.post(route(`${i}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){h("success",n("page.sample_pages_generated")),x(),s.reset()}})};return(V,c)=>(d(),b(B,null,[t(G,{onClick:p},{default:e(()=>[l(r(a(n)("page.generate_samples")),1)]),_:1}),t(oe,{show:u.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:x},{header:e(()=>[l(r(a(n)("page.generate_page_samples")),1)]),body:e(()=>[t(S,null,{title:e(()=>[g("label",Le,[l(r(a(n)("page.brand_logo"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(s).errors.logo_url},null,8,["message"])]),default:e(()=>[g("div",null,[t(Pe,{withPreload:!0,onUpload:c[0]||(c[0]=m=>{if(m.is_local_driver){a(s).logo_url=`/storage/${m.path}`;return}a(s).logo_url=m.url})},{default:e(()=>[t(F,null,{default:e(()=>[l(r(a(n)("general.upload")),1)]),_:1})]),_:1}),a(s).logo_url?(d(),b("img",{key:0,src:a(s).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,je)):P("",!0)])]),_:1}),t(S,{class:"mt-lg"},{title:e(()=>[g("label",Be,[l(r(a(n)("page.brand_name"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(s).errors.brand_name},null,8,["message"])]),default:e(()=>[t(T,{type:"text",modelValue:a(s).brand_name,"onUpdate:modelValue":c[1]||(c[1]=m=>a(s).brand_name=m),error:a(s).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(S,{class:"mt-lg"},{title:e(()=>[g("label",Ue,[l(r(a(n)("page.contact_email"))+" ",1),t(I,{danger:!0},{default:e(()=>[l("*")]),_:1})])]),footer:e(()=>[t(w,{message:a(s).errors.email},null,8,["message"])]),default:e(()=>[t(T,{type:"text",modelValue:a(s).email,"onUpdate:modelValue":c[2]||(c[2]=m=>a(s).email=m),error:a(s).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(S,{class:"mt-lg"},{title:e(()=>[g("label",qe,r(a(n)("page.register_url")),1)]),footer:e(()=>[t(w,{message:a(s).errors.register_url},null,8,["message"])]),default:e(()=>[t(T,{type:"text",modelValue:a(s).register_url,"onUpdate:modelValue":c[3]||(c[3]=m=>a(s).register_url=m),error:a(s).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(S,{class:"mt-lg"},{footer:e(()=>[t(w,{message:a(s).errors.destroy},null,8,["message"])]),default:e(()=>[g("label",null,[t(U,{checked:a(s).destroy,"onUpdate:checked":c[4]||(c[4]=m=>a(s).destroy=m),value:!1},null,8,["checked"]),g("span",Re,r(a(n)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(F,{onClick:x,class:"mr-xs"},{default:e(()=>[l(r(a(n)("general.cancel")),1)]),_:1}),t(G,{onClick:f,disabled:a(s).processing,isLoading:a(s).processing},{default:e(()=>[l(r(a(n)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},ze={class:"w-full mx-auto max-w-6xl row-py"},Ne={class:"mt-lg row-px w-full"},Fe=ne({layout:ge}),dt=Object.assign(Fe,{__name:"Pages",props:{pages:{type:Object}},setup(o){const n=o,{t:i}=q(),u=C("routePrefix"),p=i("page.pages"),{notify:x}=R(),k=C("confirmation"),{selectedRecords:h,putPageRecords:s,toggleSelectRecordsOnPage:f,deselectRecord:V,deselectAllRecords:c}=pe(),m=()=>n.pages.data.map($=>$.uuid);ie(()=>{s(m()),L.on("pageDelete",$=>{V($)})}),ue(()=>{L.off("pageDelete")}),de(()=>n.pages.data,()=>{s(m())});const Q=()=>{k().title(i("page.delete_pages")).description(i("page.confirm_delete_pages")).destructive().onConfirm($=>{$.isLoading(!0),M.delete(route(`${u}.pages.multipleDelete`),{data:{pages:h.value},preserveScroll:!0,onSuccess(){c(),x("success",i("page.pages_deleted"))},onFinish(){$.reset()}})}).show()};return($,D)=>{const X=J("tooltip");return d(),b(B,null,[t(a(ce),{title:a(p)},null,8,["title"]),g("div",ze,[t(he,{title:a(p)},{description:e(()=>[l(r(a(i)("page.page_desc")),1)]),default:e(()=>[t(Ae)]),_:1},8,["title"]),g("div",Ne,[t(ye,{count:a(h).length,onClose:a(c)},{default:e(()=>[K((d(),y(be,{onClick:Q},{default:e(()=>[t(Z)]),_:1})),[[X,a(i)("general.delete")]])]),_:1},8,["count","onClose"]),t(Ce,null,{default:e(()=>[t(a(me),{href:$.route(`${a(u)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(fe,null,{default:e(()=>[l(r(a(i)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t($e,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(xe,null,{head:e(()=>[t(W,null,{default:e(()=>[t(_,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(U,{checked:a(f),"onUpdate:checked":D[0]||(D[0]=v=>E(f)?f.value=v:null),disabled:!o.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(r(a(i)("general.name")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(r(a(i)("page.url_path")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(r(a(i)("general.status")),1)]),_:1}),t(_,{component:"th",scope:"col"},{default:e(()=>[l(r(a(i)("general.created_at")),1)]),_:1}),t(_,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(d(!0),b(B,null,_e(o.pages.data,v=>(d(),y(Oe,{key:v.uuid,item:v,onOnDelete:()=>{a(V)(v.uuid)}},{checkbox:e(()=>[t(U,{checked:a(h),"onUpdate:checked":D[1]||(D[1]=Y=>E(h)?h.value=Y:null),value:v.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),o.pages.data.length?P("",!0):(d(),y(ve,{key:0,class:"p-md"},{default:e(()=>[l(r(a(i)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{dt as default};
