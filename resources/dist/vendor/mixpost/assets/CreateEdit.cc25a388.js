import{d as P,S as j,O as A,H as y,T as F,a0 as I,c as b,a as s,b as e,e as u,w as o,g as R,a3 as H,F as U,l as W,o as k,Z as D,q as S,i as v,h as l,t as n,m as J,f as x,aL as Z,_ as V,k as T,n as L,c9 as G,ac as K,J as Q}from"./app.a05b4c5c.js";import{_ as X}from"./Admin.7fa4ba78.js";import{u as Y}from"./usePageMode.6e127e36.js";import{_ as ee}from"./PageHeader.044c6731.js";import{_ as oe}from"./Panel.05e9bba5.js";import{_ as O}from"./HorizontalGroup.97d4c34e.js";import{_ as se}from"./Error.4aa59f2e.js";import{_ as te}from"./Input.44809a08.js";import{_ as ae}from"./ColorPicker.b4d23b31.js";import{E as re}from"./Eye.bdca2e42.js";import{T as le}from"./Trash.83ab4124.js";import{A as ne}from"./ArrowTopRightOnSquare.a67b2cfb.js";import"./Flex.513e8e8d.js";const ce={class:"row-py mb-2xl w-full sm:max-w-3xl mx-auto"},ie={key:0,class:"flex"},ue={class:"row-px"},me=["onSubmit"],de={for:"name"},pe={class:"w-full"},fe={class:"flex items-center mt-lg"},_e=P({layout:X}),Le=Object.assign(_e,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},workspace:{type:Object}},setup(h){const p=h,{t}=j(),{notify:g}=Q(),w=L("routePrefix"),E=L("confirmation"),$=A(()=>m.value?t("workspace.create_workspace"):t("workspace.edit_workspace")),{isCreate:m,isEdit:f}=Y(),d=y(!1),_=y(""),c=F({name:f.value?p.workspace.name:"",hex_color:f.value?p.workspace.hex_color:""}),N=()=>{c.hex_color=_.value,d.value=!1},q=()=>{const r=G();return r[W.exports.random(0,r.length-1)]};I(()=>{if(m.value){const r=q();c.hex_color=r,_.value=r}f.value&&(_.value=p.workspace.hex_color)});const C=(r=!1)=>{c.transform(a=>({...a,login:r})).post(route(`${w}.workspaces.store`))},z=()=>{c.put(route(`${w}.workspaces.update`,{workspace:p.workspace.uuid}),{onSuccess:()=>{g("success",t("workspace.workspace_updated"))}})},B=()=>{E().title(t("workspace.delete_workspace")).description(t("workspace.confirm_delete_workspace")).destructive().onConfirm(r=>{r.isLoading(!0),K.delete(route(`${w}.workspaces.delete`,{workspace:p.workspace.uuid}),{preserveScroll:!0,onSuccess(){g("success",t("workspace.workspace_deleted"))},onFinish(){r.reset()}})}).show()},M=()=>{m.value&&C(),f.value&&z()};return(r,a)=>(k(),b(U,null,[s(e(D),{title:e($)},null,8,["title"]),u("div",ce,[s(ee,{title:e($)},{default:o(()=>[e(f)?(k(),b("div",ie,[s(e(S),{href:r.route("mixpost.switchWorkspace",{workspace:h.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(ne)]),default:o(()=>[l(" "+n(e(t)("general.open")),1)]),_:1})]),_:1},8,["href"]),s(e(S),{href:r.route(`${e(w)}.workspaces.view`,{workspace:h.workspace.uuid}),class:"mr-xs"},{default:o(()=>[s(v,{size:"sm"},{icon:o(()=>[s(re)]),default:o(()=>[l(" "+n(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),s(J,{onClick:B,size:"sm"},{icon:o(()=>[s(le)]),_:1})])):x("",!0)]),_:1},8,["title"]),u("div",ue,[u("form",{method:"post",onSubmit:R(M,["prevent"])},[s(oe,null,{title:o(()=>[l(n(e(t)("general.details")),1)]),default:o(()=>[s(O,null,{title:o(()=>[u("label",de,n(e(t)("general.name")),1)]),default:o(()=>[u("div",pe,[s(te,{modelValue:e(c).name,"onUpdate:modelValue":a[0]||(a[0]=i=>e(c).name=i),type:"text",id:"name",placeholder:e(t)("workspace.workspace_name"),class:"w-full",autocomplete:"off",autofocus:e(m),required:""},null,8,["modelValue","placeholder","autofocus"]),s(se,{message:e(c).errors.name,class:"mt-1"},null,8,["message"])])]),_:1}),s(O,{class:"mt-lg"},{title:o(()=>[l(" Color ")]),default:o(()=>[u("div",{onClick:a[1]||(a[1]=i=>d.value=!0),style:Z({background:e(c).hex_color}),role:"button",type:"button",class:"w-xl h-xl rounded-md"},null,4)]),_:1}),u("div",fe,[s(V,{type:"submit"},{default:o(()=>[l(n(e(m)?e(t)("general.create"):e(t)("general.update")),1)]),_:1}),e(m)?(k(),T(v,{key:0,onClick:a[2]||(a[2]=i=>C(!0)),type:"button",class:"ml-xs"},{default:o(()=>[l(n(e(t)("workspace.create_and_login")),1)]),_:1})):x("",!0)])]),_:1})],40,me)])]),s(H,{show:d.value,"max-width":"md",onClose:a[5]||(a[5]=i=>d.value=!1)},{header:o(()=>[l(n(e(t)("workspace.change_workspace_color")),1)]),body:o(()=>[d.value?(k(),T(ae,{key:0,modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=i=>_.value=i)},null,8,["modelValue"])):x("",!0)]),footer:o(()=>[s(v,{onClick:a[4]||(a[4]=i=>d.value=!1),class:"mr-xs"},{default:o(()=>[l(n(e(t)("general.cancel")),1)]),_:1}),s(V,{onClick:N},{default:o(()=>[l(n(e(t)("general.done")),1)]),_:1})]),_:1},8,["show"])],64))}});export{Le as default};
