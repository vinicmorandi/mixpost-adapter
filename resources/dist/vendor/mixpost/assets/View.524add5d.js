import{n as w,H as C,l as F,af as D,o as h,c as y,a as s,w as e,h as o,t as a,T,V as E,i as S,b as r,_ as j,a3 as U,F as V,k as b,a2 as q,e as $,c8 as I,ae as M,j as H,a8 as J,a7 as L,ab as A,ac as N,r as Z,d as G,S as K,W as Q,Z as X,q as Y,m as ee,f as se,J as te}from"./app.a05b4c5c.js";import{_ as ae}from"./Admin.7fa4ba78.js";import{_ as oe}from"./PageHeader.044c6731.js";import{_ as B}from"./Panel.05e9bba5.js";import{_ as x}from"./HorizontalGroup.97d4c34e.js";import{T as O}from"./Trash.83ab4124.js";import{_ as le}from"./NoResult.b8d4ef7e.js";import{_ as re}from"./DropdownButton.8d634dd9.js";import{_ as R}from"./UserRole.22e974f3.js";import{a as P,_,T as ne}from"./TableCell.8aafd44e.js";import{E as ue}from"./Eye.bdca2e42.js";import{_ as ie}from"./PureButtonLink.21473f96.js";import"./Flex.513e8e8d.js";import"./PureButton.7cf07808.js";import"./EllipsisVertical.0bda3946.js";import"./Radio.cc3f4ee6.js";const ce={class:"relative w-full"},de={__name:"SelectWorkspace",props:{modelValue:{default:null},workspaces:{type:Array,default:[]},exclude:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:k}){const l=n,m=w("routePrefix"),p=C(l.workspaces),i=(u,c)=>{!u||(c(!0),v(c,u))},v=F.exports.throttle((u,c)=>{axios.get(route(`${m}.workspaces.resources.items`),{params:{keyword:c,exclude:l.exclude}}).then(d=>{u(!1),p.value=d.data.data.map(t=>({key:t.uuid,label:t.name}))})},350);return(u,c)=>{const d=D("v-select");return h(),y("div",ce,[s(d,{modelValue:n.modelValue,"onUpdate:modelValue":c[0]||(c[0]=t=>u.$emit("update:modelValue",t)),options:p.value,filterable:!1,"close-on-select":!0,disabled:n.disabled,placeholder:u.$t("workspace.type_search_workspace"),onSearch:i},{"no-options":e(({search:t,searching:g,loading:W})=>[o(a(u.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","disabled","placeholder"])])}}},me={__name:"AttachWorkspace",props:{user:{type:Object},attachedWorkspaces:{type:Array,default:[]}},setup(n){const k=n;w("routePrefix");const l=C(null),m=T({user_id:k.user.id,role:"admin"}),p=()=>{m.post(route("mixpost.workspaces.users.store",{workspace:l.value.key}),{preserveScroll:!0,onSuccess(){u(),m.reset()}})},i=C(!1),v=()=>{i.value=!0},u=()=>{i.value=!1,l.value=null};return(c,d)=>(h(),y(V,null,[s(S,{onClick:v,size:"sm"},{default:e(()=>[s(E,{class:"mr-xs"}),o(" "+a(c.$t("team.attach")),1)]),_:1}),s(U,{show:i.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[o(a(c.$t("team.attach_workspace")),1)]),body:e(()=>[s(de,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=t=>l.value=t),exclude:n.attachedWorkspaces},null,8,["modelValue","exclude"]),s(R,{modelValue:r(m).role,"onUpdate:modelValue":d[1]||(d[1]=t=>r(m).role=t),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:u,class:"mr-xs"},{default:e(()=>[o(a(c.$t("general.cancel")),1)]),_:1}),s(j,{onClick:p,disabled:!l.value||r(m).processing,isLoading:r(m).processing},{default:e(()=>[o(a(c.$t("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},fe={class:"flex justify-start"},pe={class:"capitalize"},_e={class:"flex justify-end"},he={__name:"UserWorkspaces",props:{user:{type:Object}},setup(n){const k=n,l=w("routePrefix"),m=w("confirmation"),p=C(null),i=T({user_id:k.user.id,role:"admin"}),v=t=>{i.role=t.pivot.role,p.value=t},u=()=>{p.value=null},c=t=>{m().title($t("team.detach_workspace")).description($t("team.detach_confirm",{workspace:t.name,user:k.user.name})).destructive().btnConfirmName($t("admin.detach")).onConfirm(g=>{g.isLoading(!0),N.delete(route(`${l}.workspaces.users.delete`,{workspace:t.uuid}),{data:{user_id:k.user.id},preserveScroll:!0,onSuccess(){g.reset()},onFinish(){g.isLoading(!1)}})}).show()},d=()=>{i.put(route(`${l}.workspaces.users.update`,{workspace:p.value.uuid}),{data:{user_id:k.user.id},preserveScroll:!0,onSuccess(){i.reset(),u()}})};return(t,g)=>{const W=Z("tooltip");return h(),y(V,null,[s(B,null,{title:e(()=>[o(a(t.$t("workspace.workspaces")),1)]),action:e(()=>[s(me,{user:n.user,attachedWorkspaces:n.user.workspaces.map(f=>f.uuid)},null,8,["user","attachedWorkspaces"])]),default:e(()=>[n.user.workspaces.length?(h(),b(ne,{key:0},{head:e(()=>[s(P,null,{default:e(()=>[s(_,{component:"th",scope:"col"}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("general.name")),1)]),_:1}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.role")),1)]),_:1}),s(_,{component:"th",scope:"col"},{default:e(()=>[o(a(t.$t("team.attached_at")),1)]),_:1}),s(_,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(h(!0),y(V,null,q(n.user.workspaces,f=>(h(),b(P,{key:f.id,hoverable:!0},{default:e(()=>[s(_,{align:"left"},{default:e(()=>[$("div",fe,[s(I,{backgroundColor:f.hex_color,name:f.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])])]),_:2},1024),s(_,null,{default:e(()=>[$("div",null,a(f.name),1)]),_:2},1024),s(_,null,{default:e(()=>[s(M,null,{default:e(()=>[$("span",pe,a(f.pivot.role),1)]),_:2},1024)]),_:2},1024),s(_,null,{default:e(()=>[o(a(f.pivot.joined_at),1)]),_:2},1024),s(_,{align:"right"},{default:e(()=>[$("div",_e,[H((h(),b(ie,{href:t.route(`${r(l)}.workspaces.view`,{workspace:f.uuid}),class:"mr-xs"},{default:e(()=>[s(ue)]),_:2},1032,["href"])),[[W,t.$t("general.view")]]),s(J,{"width-classes":"w-32",placement:"bottom-end"},{trigger:e(()=>[s(re)]),content:e(()=>[s(L,{onClick:z=>v(f),as:"button"},{default:e(()=>[s(A,{class:"mr-xs"}),o(" "+a(t.$t("team.edit_role")),1)]),_:2},1032,["onClick"]),s(L,{onClick:z=>c(f),as:"button"},{default:e(()=>[s(O,{class:"text-red-500 mr-xs"}),o(" "+a(t.$t("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(h(),b(le,{key:1}))]),_:1}),s(U,{show:p.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:u},{header:e(()=>[o(a(t.$t("team.edit_role_on"))+" ",1),$("strong",null,a(p.value.name),1),o(" "+a(t.$t("workspace.workspaces")),1)]),body:e(()=>[s(R,{modelValue:r(i).role,"onUpdate:modelValue":g[0]||(g[0]=f=>r(i).role=f),class:"mt-lg"},null,8,["modelValue"])]),footer:e(()=>[s(S,{onClick:u,class:"mr-xs"},{default:e(()=>[o(a(t.$t("general.cancel")),1)]),_:1}),s(j,{onClick:d,disabled:r(i).processing,isLoading:r(i).processing},{default:e(()=>[o(a(t.$t("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},$e={class:"w-full mx-auto max-w-6xl row-py"},ke={class:"flex items-center"},ve={class:"row-px"},ge={class:"md:max-w-2xl"},we={class:"mt-lg"},be=G({layout:ae}),ze=Object.assign(be,{__name:"View",props:{user:{type:Object}},setup(n){const k=n,{t:l}=K(),m=w("routePrefix"),p=w("confirmation"),i=l("user.view_user"),{notify:v}=te(),{user:u}=Q(),c=()=>{p().title(l("user.delete_users")).description(l("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),N.delete(route(`${m}.users.delete`,{user:k.user.id}),{onSuccess(t){t.props.flash.error||v("success",l("user.user_deleted"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,t)=>(h(),y(V,null,[s(r(X),{title:r(i)},null,8,["title"]),$("div",$e,[s(oe,{title:r(i)},{description:e(()=>[o(a(n.user.name),1)]),default:e(()=>[$("div",ke,[s(r(Y),{href:d.route(`${r(m)}.users.edit`,{user:n.user.id}),class:"mr-xs"},{default:e(()=>[s(j,{size:"sm"},{icon:e(()=>[s(A)]),default:e(()=>[o(" "+a(r(l)("general.edit")),1)]),_:1})]),_:1},8,["href"]),r(u).id!==n.user.id?(h(),b(ee,{key:0,onClick:c,size:"sm"},{icon:e(()=>[s(O)]),_:1})):se("",!0)])]),_:1},8,["title"]),$("div",ve,[s(B,null,{title:e(()=>[o(a(r(l)("user.user_details")),1)]),default:e(()=>[$("div",ge,[s(x,null,{title:e(()=>[o(a(r(l)("general.name")),1)]),default:e(()=>[o(" "+a(n.user.name),1)]),_:1}),s(x,{class:"mt-md"},{title:e(()=>[o(a(r(l)("general.email")),1)]),default:e(()=>[o(" "+a(n.user.email),1)]),_:1}),s(x,{class:"mt-md"},{title:e(()=>[o(a(r(l)("general.created_at")),1)]),default:e(()=>[o(" "+a(n.user.created_at),1)]),_:1}),s(x,{class:"mt-md"},{title:e(()=>[o(a(r(l)("user.system_admin")),1)]),default:e(()=>[o(" "+a(n.user.is_admin?r(l)("general.yes"):r(l)("general.no")),1)]),_:1})])]),_:1}),$("div",we,[s(he,{user:n.user},null,8,["user"])])])])],64))}});export{ze as default};
