import{H as C,r as A,o as c,c as m,e as l,a as r,w as i,t as o,F as $,a2 as w,b as e,E as b,h as f,_ as E,j as B,k as U,q as W,l as j,A as Z,S as F,f as V,X as q,cl as H,T as X,cd as z,Z as J,i as S,m as K,n as L,J as Y}from"./app.a05b4c5c.js";import{_ as G}from"./PageHeader.044c6731.js";import{_ as T}from"./Panel.05e9bba5.js";import{W as I}from"./constants.9689ba33.js";import{u as D}from"./useSettings.3c9a095f.js";import{_ as M}from"./Select.f675cc46.js";import{E as O}from"./ExclamationCircle.df2493b4.js";import{F as Q}from"./overrideFlatPickr.04b1d09f.js";import{_ as R}from"./PureDangerButton.9adab555.js";import"./Flex.513e8e8d.js";import"./vue.runtime.esm-bundler.1eff9dea.js";const ee={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},te={value:"everyday"},se=["value"],oe={class:"mr-xs text-gray-400"},le={class:"w-auto",ref:"timePicker"},ae={class:"text-sm flex items-center mt-md"},ne={class:"mr-xs"},ie={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(p,{emit:x}){const s=p,{timeZone:g,timeFormat:v}=D(),n=C({day:"everyday",time:"06:30"}),h={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:v===24},k=()=>{const u=j.exports.cloneDeep(s.modelValue),_=n.value.day==="everyday";if(!_){const t=u.findIndex(a=>parseInt(a.id)===parseInt(n.value.day));u[t].times.push({value:n.value.time,format:n.value.format})}_&&u.forEach(t=>{t.times.push({value:n.value.time,format:n.value.format})}),x("update:modelValue",u)};return(u,_)=>{const t=A("tooltip");return c(),m($,null,[l("div",ee,[l("div",null,[r(M,{modelValue:n.value.day,"onUpdate:modelValue":_[0]||(_[0]=a=>n.value.day=a)},{default:i(()=>[l("option",te,o(u.$t("posting_schedule.everyday")),1),(c(!0),m($,null,w(e(I),a=>(c(),m("option",{key:a.id,value:a.id},o(u.$t(`calendar.weekdays.${a.key}.full`)),9,se))),128))]),_:1},8,["modelValue"])]),l("div",{class:b([{"sm:w-40":e(v)===12,"sm:w-56":e(v)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[l("div",oe,o(u.$t("general.time")),1),l("div",le,[r(e(Q),{modelValue:n.value.time,"onUpdate:modelValue":_[1]||(_[1]=a=>n.value.time=a),config:h},null,8,["modelValue"])],512)],2),l("div",null,[r(E,{onClick:k},{default:i(()=>[f(o(u.$t("posting_schedule.add_post_time")),1)]),_:1})])]),l("div",ae,[l("div",ne,o(e(g)),1),B((c(),U(e(W),{href:u.route("mixpost.profile.index")},{default:i(()=>[r(O,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[t,u.$t("posting_schedule.posting_times_determined")]])])],64)}}},re={__name:"Switch",props:["modelValue"],emits:["update:modelValue"],setup(p,{emit:x}){const s=p;C(s.value);const g=()=>{let v=typeof s.modelValue=="boolean"?!s.modelValue:s.modelValue?0:1;x("update:modelValue",v)};return(v,n)=>(c(),m("button",{onClick:g,type:"button",role:"checkbox","aria-checked":"false",class:"flex items-center focus:outline-none border-0 p-0 bg-none"},[Z(v.$slots,"default"),l("span",{class:b([{"justify-start":!p.modelValue,"justify-end":p.modelValue},"inline-flex items-center px-1 border border-stone-600 h-6 w-10 rounded-full focus:outline-none"])},[l("span",{class:b([{"bg-primary-500":p.modelValue,"bg-gray-500":!p.modelValue},"block rounded-full w-3 h-3"])},null,2)],2)]))}},ue={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},de={class:"font-medium text-center"},ce={class:"flex justify-center mt-xs"},me={class:"mr-xs"},pe={key:0},_e={key:1},fe={class:"flex flex-col justify-center mt-xs"},ge={key:0,class:"text-gray-500 text-sm text-center"},ve=l("span",null,":",-1),he={class:"uppercase"},xe={class:"absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},ye={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(p,{emit:x}){const s=p,{t:g}=F(),{timeZone:v,timeFormat:n}=D(),h=t=>{const a=I.find(d=>d.id===t);return a?g(`calendar.weekdays.${a.key}.full`):null},k=t=>j.exports.sortBy(t.times,[d=>d.value]).map(d=>({value:u(d.value)})),u=t=>n===12?H(t,"hh:mm aaa"):t,_=(t,a)=>{s.times[t].times.splice(a,1)};return(t,a)=>(c(),m("div",ue,[(c(!0),m($,null,w(p.times,(d,N)=>(c(),m("div",{key:d.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[l("div",de,o(h(d.id)),1),l("div",ce,[r(re,{modelValue:d.status,"onUpdate:modelValue":y=>d.status=y},{default:i(()=>[l("span",me,[d.status?(c(),m("span",pe,o(e(g)("general.on")),1)):V("",!0),d.status?V("",!0):(c(),m("span",_e,o(e(g)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l("div",fe,[d.times.length?V("",!0):(c(),m("span",ge,o(e(g)("general.empty")),1)),d.times.length?(c(!0),m($,{key:1},w(k(d),(y,P)=>(c(),m("div",{key:y.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[l("span",null,o(y.value.split(":")[0]),1),ve,l("span",null,o(y.value.split(":")[1]),1),l("span",he,o(y.format),1),l("span",xe,[r(R,{onClick:Ve=>_(N,P)},{default:i(()=>[r(q,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):V("",!0)])]))),128))]))}},ke={class:"w-full max-w-6xl mx-auto row-py"},$e={class:"w-full row-px"},Pe={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(p){const x=p,{t:s}=F(),g=L("workspaceCtx"),{notify:v}=Y(),n=X({times:x.times}),h=C(!1),k=()=>{n.times.forEach(_=>{_.times=[]}),h.value=!1},u=()=>{n.put(route("mixpost.postingSchedule.update",{workspace:g.id}),{preserveScroll:!0,onSuccess(){v("success",s("posting_schedule.posting_times_updated"))}})};return(_,t)=>(c(),m($,null,[r(e(J),{title:e(s)("posting_schedule.posting_schedule")},null,8,["title"]),l("div",ke,[r(G,{title:e(s)("posting_schedule.posting_schedule")},{description:i(()=>[f(o(e(s)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),l("div",$e,[r(T,null,{title:i(()=>[f(o(e(s)("posting_schedule.add_new_posting_time")),1)]),default:i(()=>[r(ie,{modelValue:e(n).times,"onUpdate:modelValue":t[0]||(t[0]=a=>e(n).times=a)},null,8,["modelValue"])]),_:1}),r(T,{class:"mt-lg"},{title:i(()=>[f(o(e(s)("posting_schedule.posting_times")),1)]),description:i(()=>[f(o(e(s)("posting_schedule.send_posting_schedule")),1)]),action:i(()=>[r(S,{onClick:t[1]||(t[1]=a=>h.value=!0)},{default:i(()=>[f(o(e(s)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:i(()=>[r(ye,{times:e(n).times},null,8,["times"])]),_:1}),r(E,{onClick:u,disabled:e(n).processing,class:"mt-md"},{default:i(()=>[f(o(e(s)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),r(z,{show:h.value,variant:"danger",onClose:t[3]||(t[3]=a=>h.value=!1)},{header:i(()=>[f(o(e(s)("posting_schedule.clear_all_posting_times")),1)]),body:i(()=>[f(o(e(s)("posting_schedule.confirmation_posting_times")),1)]),footer:i(()=>[r(S,{onClick:t[2]||(t[2]=a=>h.value=!1),class:"mr-xs"},{default:i(()=>[f(o(e(s)("general.cancel")),1)]),_:1}),r(K,{onClick:k},{default:i(()=>[f(o(e(s)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{Pe as default};
