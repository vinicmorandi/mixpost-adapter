import{p as z,o as f,c as y,e as c,O as F,k as V,w as l,b as r,j as q,a as i,E as H,Y as We,r as ve,H as B,$ as Je,a0 as Xe,a1 as Ye,F as j,a2 as Qe,f as Z,h as b,t as g,i as G,_ as ne,a3 as ue,a4 as et,a5 as tt,a6 as Se,a7 as D,a8 as ze,a9 as st,P as nt,S as be,n as J,aa as Ie,T as ye,l as oe,ab as ot,m as Ve,ac as Be,J as ke,ad as rt,ae as it,af as lt,V as at,d as dt,g as ut,Z as ct}from"./app.a05b4c5c.js";import{_ as pt}from"./Admin.7fa4ba78.js";import{u as mt}from"./usePageMode.6e127e36.js";import{_ as ht}from"./PageHeader.044c6731.js";import{_ as pe}from"./Panel.05e9bba5.js";import{_ as U}from"./Error.4aa59f2e.js";import{_ as te}from"./Input.44809a08.js";import{T as we}from"./Trash.83ab4124.js";import{A as ft}from"./ArrowTopRightOnSquare.a67b2cfb.js";import{V as O,_ as he}from"./LabelSuffix.20800baf.js";import{_ as le}from"./Select.f675cc46.js";import{_ as Ee}from"./Textarea.8d64ff10.js";import{H as gt,D as _t}from"./index.46705d6a.js";import{n as Oe}from"./index.browser.8e74d592.js";import{_ as vt,L as bt}from"./ListItem.6e08e2e8.js";import{_ as ae}from"./PureButton.7cf07808.js";import{_ as Re}from"./NoResult.b8d4ef7e.js";import{N as E,m as L,w as se,M as K,a as X,b as Y,g as Pe,t as fe,P as $e,c as yt,T as W,d as kt,E as ce,S as de,k as wt,e as xe,F as ge,f as Ae,D as $t,h as xt,i as At,j as Ct,n as Ne,l as Mt,o as Lt,p as Tt,q as Ht,r as _e,s as St,V as zt,u as It,v as Vt,L as Bt,x as Et}from"./index.a09b91eb.js";import{_ as Ot}from"./UploadButton.85a01342.js";import"./Flex.513e8e8d.js";import"./vue.runtime.esm-bundler.1eff9dea.js";const Rt={},Pt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 7 18"},Nt=c("path",{d:"M2.10477 13.5C1.48483 13.5 0.982269 12.9963 0.982269 12.375C0.982269 11.7537 1.48483 11.25 2.10477 11.25C2.72472 11.25 3.22728 11.7537 3.22728 12.375C3.22728 12.9963 2.72472 13.5 2.10477 13.5ZM2.10477 6C1.48483 6 0.982269 5.49632 0.982269 4.875C0.982269 4.25368 1.48483 3.75 2.10477 3.75C2.72472 3.75 3.22728 4.25368 3.22728 4.875C3.22728 5.49632 2.72472 6 2.10477 6ZM2.10477 2.25C1.48483 2.25 0.982269 1.74632 0.982269 1.125C0.982269 0.50368 1.48483 0 2.10477 0C2.72472 0 3.22728 0.50368 3.22728 1.125C3.22728 1.74632 2.72472 2.25 2.10477 2.25ZM2.10477 17.25C1.48483 17.25 0.982269 16.7463 0.982269 16.125C0.982269 15.5037 1.48483 15 2.10477 15C2.72472 15 3.22728 15.5037 3.22728 16.125C3.22728 16.7463 2.72472 17.25 2.10477 17.25ZM2.10477 9.75C1.48483 9.75 0.982269 9.24632 0.982269 8.625C0.982269 8.00368 1.48483 7.5 2.10477 7.5C2.72472 7.5 3.22728 8.00368 3.22728 8.625C3.22728 9.24632 2.72472 9.75 2.10477 9.75ZM5.84646 13.5C5.22652 13.5 4.72395 12.9963 4.72395 12.375C4.72395 11.7537 5.22652 11.25 5.84646 11.25C6.4664 11.25 6.96897 11.7537 6.96897 12.375C6.96897 12.9963 6.4664 13.5 5.84646 13.5ZM5.84646 6C5.22652 6 4.72395 5.49632 4.72395 4.875C4.72395 4.25368 5.22652 3.75 5.84646 3.75C6.4664 3.75 6.96897 4.25368 6.96897 4.875C6.96897 5.49632 6.4664 6 5.84646 6ZM5.84646 2.25C5.22652 2.25 4.72395 1.74632 4.72395 1.125C4.72395 0.50368 5.22652 0 5.84646 0C6.4664 0 6.96897 0.50368 6.96897 1.125C6.96897 1.74632 6.4664 2.25 5.84646 2.25ZM5.84646 17.25C5.22652 17.25 4.72395 16.7463 4.72395 16.125C4.72395 15.5037 5.22652 15 5.84646 15C6.4664 15 6.96897 15.5037 6.96897 16.125C6.96897 16.7463 6.4664 17.25 5.84646 17.25ZM5.84646 9.75C5.22652 9.75 4.72395 9.24632 4.72395 8.625C4.72395 8.00368 5.22652 7.5 5.84646 7.5C6.4664 7.5 6.96897 8.00368 6.96897 8.625C6.96897 9.24632 6.4664 9.75 5.84646 9.75Z",fill:"currentColor"},null,-1),Dt=[Nt];function Ft(e,t){return f(),y("svg",Pt,Dt)}const qt=z(Rt,[["render",Ft]]),Ut=/^\s*>\s$/,jt=E.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[se({find:Ut,type:this.type})]}}),Zt=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Gt=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Kt=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Wt=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Jt=K.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[X({find:Zt,type:this.type}),X({find:Kt,type:this.type})]},addPasteRules(){return[Y({find:Gt,type:this.type}),Y({find:Wt,type:this.type})]}}),Xt=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Me=K.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",L(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const s=Pe(e,this.type);return Object.entries(s).some(([,n])=>!!n)?!0:t.unsetMark(this.name)}}}}),Le=/^\s*([-+*])\s$/,Yt=E.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",L(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Xt.name,this.editor.getAttributes(Me.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=se({find:Le,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=se({find:Le,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Me.name),editor:this.editor})),[e]}}),Qt=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,es=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,ts=K.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[X({find:Qt,type:this.type})]},addPasteRules(){return[Y({find:es,type:this.type})]}}),ss=/^```([a-z]+)?[\s\n]$/,ns=/^~~~([a-z]+)?[\s\n]$/,os=E.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:s}=this.options,h=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(d=>d.startsWith(s)).map(d=>d.replace(s,""))[0];return h||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",L(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,s=t.pos===1;return!e||t.parent.type.name!==this.name?!1:s||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:s}=t,{$from:o,empty:n}=s;if(!n||o.parent.type!==this.type)return!1;const h=o.parentOffset===o.parent.nodeSize-2,d=o.parent.textContent.endsWith(`

`);return!h||!d?!1:e.chain().command(({tr:u})=>(u.delete(o.pos-2,o.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:s,doc:o}=t,{$from:n,empty:h}=s;if(!h||n.parent.type!==this.type||!(n.parentOffset===n.parent.nodeSize-2))return!1;const u=n.after();return u===void 0||o.nodeAt(u)?!1:e.commands.exitCode()}}},addInputRules(){return[fe({find:ss,type:this.type,getAttributes:e=>({language:e[1]})}),fe({find:ns,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new $e({key:new yt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const s=t.clipboardData.getData("text/plain"),o=t.clipboardData.getData("vscode-editor-data"),n=o?JSON.parse(o):void 0,h=n==null?void 0:n.mode;if(!s||!h)return!1;const{tr:d}=e.state;return d.replaceSelectionWith(this.type.create({language:h})),d.setSelection(W.near(d.doc.resolve(Math.max(0,d.selection.from-2)))),d.insertText(s.replace(/\r\n?/g,`
`)),d.setMeta("paste",!0),e.dispatch(d),!0}}})]}});function rs(e={}){return new $e({view(t){return new is(t,e)}})}class is{constructor(t,s){var o;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(o=s.width)!==null&&o!==void 0?o:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(n=>{let h=d=>{this[n](d)};return t.dom.addEventListener(n,h),{name:n,handler:h}})}destroy(){this.handlers.forEach(({name:t,handler:s})=>this.editorView.dom.removeEventListener(t,s))}update(t,s){this.cursorPos!=null&&s.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),s=!t.parent.inlineContent,o;if(s){let u=t.nodeBefore,a=t.nodeAfter;if(u||a){let m=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(m){let p=m.getBoundingClientRect(),_=u?p.bottom:p.top;u&&a&&(_=(_+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),o={left:p.left,right:p.right,top:_-this.width/2,bottom:_+this.width/2}}}}if(!o){let u=this.editorView.coordsAtPos(this.cursorPos);o={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}let n=this.editorView.dom.offsetParent;this.element||(this.element=n.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let h,d;if(!n||n==document.body&&getComputedStyle(n).position=="static")h=-pageXOffset,d=-pageYOffset;else{let u=n.getBoundingClientRect();h=u.left-n.scrollLeft,d=u.top-n.scrollTop}this.element.style.left=o.left-h+"px",this.element.style.top=o.top-d+"px",this.element.style.width=o.right-o.left+"px",this.element.style.height=o.bottom-o.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),o=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),n=o&&o.type.spec.disableDropCursor,h=typeof n=="function"?n(this.editorView,s,t):n;if(s&&!h){let d=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=kt(this.editorView.state.doc,d,this.editorView.dragging.slice);u!=null&&(d=u)}this.setCursor(d),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const ls=ce.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[rs(this.options)]}});class C extends de{constructor(t){super(t,t)}map(t,s){let o=t.resolve(s.map(this.head));return C.valid(o)?new C(o):de.near(o)}content(){return Ae.empty}eq(t){return t instanceof C&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new C(t.resolve(s.pos))}getBookmark(){return new Ce(this.anchor)}static valid(t){let s=t.parent;if(s.isTextblock||!as(t)||!ds(t))return!1;let o=s.type.spec.allowGapCursor;if(o!=null)return o;let n=s.contentMatchAt(t.index()).defaultType;return n&&n.isTextblock}static findGapCursorFrom(t,s,o=!1){e:for(;;){if(!o&&C.valid(t))return t;let n=t.pos,h=null;for(let d=t.depth;;d--){let u=t.node(d);if(s>0?t.indexAfter(d)<u.childCount:t.index(d)>0){h=u.child(s>0?t.indexAfter(d):t.index(d)-1);break}else if(d==0)return null;n+=s;let a=t.doc.resolve(n);if(C.valid(a))return a}for(;;){let d=s>0?h.firstChild:h.lastChild;if(!d){if(h.isAtom&&!h.isText&&!xe.isSelectable(h)){t=t.doc.resolve(n+h.nodeSize*s),o=!1;continue e}break}h=d,n+=s;let u=t.doc.resolve(n);if(C.valid(u))return u}return null}}}C.prototype.visible=!1;C.findFrom=C.findGapCursorFrom;de.jsonID("gapcursor",C);class Ce{constructor(t){this.pos=t}map(t){return new Ce(t.map(this.pos))}resolve(t){let s=t.resolve(this.pos);return C.valid(s)?new C(s):de.near(s)}}function as(e){for(let t=e.depth;t>=0;t--){let s=e.index(t),o=e.node(t);if(s==0){if(o.type.spec.isolating)return!0;continue}for(let n=o.child(s-1);;n=n.lastChild){if(n.childCount==0&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}function ds(e){for(let t=e.depth;t>=0;t--){let s=e.indexAfter(t),o=e.node(t);if(s==o.childCount){if(o.type.spec.isolating)return!0;continue}for(let n=o.child(s);;n=n.firstChild){if(n.childCount==0&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}function us(){return new $e({props:{decorations:hs,createSelectionBetween(e,t,s){return t.pos==s.pos&&C.valid(s)?new C(s):null},handleClick:ps,handleKeyDown:cs,handleDOMEvents:{beforeinput:ms}}})}const cs=wt({ArrowLeft:ie("horiz",-1),ArrowRight:ie("horiz",1),ArrowUp:ie("vert",-1),ArrowDown:ie("vert",1)});function ie(e,t){const s=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(o,n,h){let d=o.selection,u=t>0?d.$to:d.$from,a=d.empty;if(d instanceof W){if(!h.endOfTextblock(s)||u.depth==0)return!1;a=!1,u=o.doc.resolve(t>0?u.after():u.before())}let m=C.findGapCursorFrom(u,t,a);return m?(n&&n(o.tr.setSelection(new C(m))),!0):!1}}function ps(e,t,s){if(!e||!e.editable)return!1;let o=e.state.doc.resolve(t);if(!C.valid(o))return!1;let n=e.posAtCoords({left:s.clientX,top:s.clientY});return n&&n.inside>-1&&xe.isSelectable(e.state.doc.nodeAt(n.inside))?!1:(e.dispatch(e.state.tr.setSelection(new C(o))),!0)}function ms(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof C))return!1;let{$from:s}=e.state.selection,o=s.parent.contentMatchAt(s.index()).findWrapping(e.state.schema.nodes.text);if(!o)return!1;let n=ge.empty;for(let d=o.length-1;d>=0;d--)n=ge.from(o[d].createAndFill(null,n));let h=e.state.tr.replace(s.pos,s.pos,new Ae(n,0,0));return h.setSelection(W.near(h.doc.resolve(s.pos+1))),e.dispatch(h),!1}function hs(e){if(!(e.selection instanceof C))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",$t.create(e.doc,[xt.widget(e.selection.head,t,{key:"gapcursor"})])}const fs=ce.create({name:"gapCursor",addProseMirrorPlugins(){return[us()]},extendNodeSchema(e){var t;const s={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=At(Ct(e,"allowGapCursor",s)))!==null&&t!==void 0?t:null}}}),gs=E.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",L(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:s,editor:o})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:n,storedMarks:h}=s;if(n.$from.parent.type.spec.isolating)return!1;const{keepMarks:d}=this.options,{splittableMarks:u}=o.extensionManager,a=h||n.$to.parentOffset&&n.$from.marks();return t().insertContent({type:this.name}).command(({tr:m,dispatch:p})=>{if(p&&a&&d){const _=a.filter($=>u.includes($.type.name));m.ensureMarks(_)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_s=E.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,L(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>fe({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),vs=E.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",L(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{$to:s}=t.selection,o=e();return s.parentOffset===0?o.insertContentAt(Math.max(s.pos-2,0),{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:n,dispatch:h})=>{var d;if(h){const{$to:u}=n.selection,a=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?n.setSelection(W.create(n.doc,u.pos+1)):u.nodeAfter.isBlock?n.setSelection(xe.create(n.doc,u.pos)):n.setSelection(W.create(n.doc,u.pos));else{const m=(d=u.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();m&&(n.insert(a,m),n.setSelection(W.create(n.doc,a+1)))}n.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ne({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),bs=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,ys=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ks=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,ws=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,$s=K.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[X({find:bs,type:this.type}),X({find:ks,type:this.type})]},addPasteRules(){return[Y({find:ys,type:this.type}),Y({find:ws,type:this.type})]}}),xs=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),As=E.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",L(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Te=K.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",L(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const s=Pe(e,this.type);return Object.entries(s).some(([,n])=>!!n)?!0:t.unsetMark(this.name)}}}}),He=/^(\d+)\.\s$/,Cs=E.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...s}=e;return t===1?["ol",L(this.options.HTMLAttributes,s),0]:["ol",L(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(As.name,this.editor.getAttributes(Te.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=se({find:He,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=se({find:He,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Te.name)}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1],editor:this.editor})),[e]}}),Ms=E.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ls=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Ts=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Hs=K.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){const e={};return Mt()?e["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():e["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),e},addInputRules(){return[X({find:Ls,type:this.type})]},addPasteRules(){return[Y({find:Ts,type:this.type})]}}),Ss=ce.create({name:"starterKit",addExtensions(){var e,t,s,o,n,h,d,u,a,m,p,_,$,I,T,A,k,x;const v=[];return this.options.blockquote!==!1&&v.push(jt.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bold!==!1&&v.push(Jt.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&v.push(Yt.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&v.push(ts.configure((o=this.options)===null||o===void 0?void 0:o.code)),this.options.codeBlock!==!1&&v.push(os.configure((n=this.options)===null||n===void 0?void 0:n.codeBlock)),this.options.document!==!1&&v.push(Lt.configure((h=this.options)===null||h===void 0?void 0:h.document)),this.options.dropcursor!==!1&&v.push(ls.configure((d=this.options)===null||d===void 0?void 0:d.dropcursor)),this.options.gapcursor!==!1&&v.push(fs.configure((u=this.options)===null||u===void 0?void 0:u.gapcursor)),this.options.hardBreak!==!1&&v.push(gs.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&v.push(_s.configure((m=this.options)===null||m===void 0?void 0:m.heading)),this.options.history!==!1&&v.push(gt.configure((p=this.options)===null||p===void 0?void 0:p.history)),this.options.horizontalRule!==!1&&v.push(vs.configure((_=this.options)===null||_===void 0?void 0:_.horizontalRule)),this.options.italic!==!1&&v.push($s.configure(($=this.options)===null||$===void 0?void 0:$.italic)),this.options.listItem!==!1&&v.push(xs.configure((I=this.options)===null||I===void 0?void 0:I.listItem)),this.options.orderedList!==!1&&v.push(Cs.configure((T=this.options)===null||T===void 0?void 0:T.orderedList)),this.options.paragraph!==!1&&v.push(Ms.configure((A=this.options)===null||A===void 0?void 0:A.paragraph)),this.options.strike!==!1&&v.push(Hs.configure((k=this.options)===null||k===void 0?void 0:k.strike)),this.options.text!==!1&&v.push(Tt.configure((x=this.options)===null||x===void 0?void 0:x.text)),v}}),zs=K.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",L(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Is=ce.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.every(s=>t.updateAttributes(s,{textAlign:e})):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.every(t=>e.resetAttributes(t,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Vs=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Bs=E.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",L(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Ne({find:Vs,type:this.type,getAttributes:e=>{const[,,t,s,o]=e;return{src:s,alt:t,title:o}}})]}}),S={INLINE:"inline",CENTER:"center",FLOAT_LEFT:"left",FLOAT_RIGHT:"right"},me={};function Es(e){return new Promise((t,s)=>{const o={complete:!1,width:0,height:0,src:e};if(!e){s(o);return}if(me[e]){t({...me[e]});return}const n=new Image;n.onload=()=>{o.width=n.width,o.height=n.height,o.complete=!0,me[e]={...o},t(o)},n.onerror=()=>{s(o)},n.src=e})}function Os(e,t,s){return e<t?t:e>s?s:e}const Rs=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,Ps=null,Ns=S.INLINE,Ds={},Fs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},qs=c("path",{d:"M4 19h16v2H4zm5-4h11v2H9zm-5-4h16v2H4zm0-8h16v2H4zm5 4h11v2H9z"},null,-1),Us=[qs];function js(e,t){return f(),y("svg",Fs,Us)}const De=z(Ds,[["render",js]]),Zs={},Gs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Ks=c("path",{d:"M4 19h16v2H4zm3-4h10v2H7zm-3-4h16v2H4zm0-8h16v2H4zm3 4h10v2H7z"},null,-1),Ws=[Ks];function Js(e,t){return f(),y("svg",Gs,Ws)}const Fe=z(Zs,[["render",Js]]),Xs={},Ys={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Qs=c("path",{d:"M4 19h16v2H4zm0-4h11v2H4zm0-4h16v2H4zm0-8h16v2H4zm0 4h11v2H4z"},null,-1),en=[Qs];function tn(e,t){return f(),y("svg",Ys,en)}const qe=z(Xs,[["render",tn]]),sn={class:"p-md bg-white"},nn={class:"editorClassicMenu flex gap-xs"},on={__name:"ImageMenu",props:{editor:{required:!0,type:Ht},node:_e.node,updateAttributes:_e.updateAttributes,deleteNode:{required:!0,type:Function},selected:{required:!0,type:Boolean}},setup(e){const t=e,s=F(()=>t.node.attrs.display),o=h=>{if(h===s.value){t.updateAttributes({display:S.INLINE});return}t.updateAttributes({display:h})},n=()=>{t.deleteNode()};return(h,d)=>{const u=ve("tooltip");return f(),V(r(We),{triggers:[],shown:e.selected,autoHide:!1},{popper:l(({hide:a})=>[c("div",sn,[c("div",nn,[q((f(),y("button",{onClick:d[0]||(d[0]=m=>o(r(S).FLOAT_LEFT)),class:H({"is-active":r(S).FLOAT_LEFT===r(s)}),type:"button"},[i(qe)],2)),[[u,h.$t("editor.align_left")]]),q((f(),y("button",{onClick:d[1]||(d[1]=m=>o(r(S).CENTER)),class:H({"is-active":r(S).CENTER===r(s)}),type:"button"},[i(Fe)],2)),[[u,h.$t("editor.align_center")]]),q((f(),y("button",{onClick:d[2]||(d[2]=m=>o(r(S).FLOAT_RIGHT)),class:H({"is-active":r(S).FLOAT_RIGHT===r(s)}),type:"button"},[i(De)],2)),[[u,h.$t("editor.align_right")]]),q((f(),V(ae,{onClick:n,destructive:""},{default:l(()=>[i(we)]),_:1})),[[u,h.$t("editor.remove_image")]])])])]),_:1},8,["shown"])}}},rn={class:"drag-handle",contentEditable:"false",draggable:"true","data-drag-handle":""},ln=["src","title","alt","width","height","data-display"],an={key:0,class:"border border-primary-500 h-full left-0 absolute top-0 w-full z-10"},dn=["onMousedown"],un={__name:"Image",props:{..._e},setup(e){const t=e,s=20,o=1e5,n={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},h=F(()=>t.node.attrs.src),d=F(()=>t.node.attrs.width),u=F(()=>t.node.attrs.height),a=F(()=>t.node.attrs.display),m=F(()=>({"float-none inline-block":a.value===S.INLINE,"flex justify-center":a.value===S.CENTER,"float-left ml-0 mr-md":a.value===S.FLOAT_LEFT,"float-right ml-xs mr-0":a.value===S.FLOAT_RIGHT})),p=B({width:0,height:0}),_=B({width:o,height:o}),$=B(!1);Je(async()=>{const w=await Es(h.value);w.complete||(w.width=s,w.height=s),p.value={width:w.width,height:w.height}});const I=()=>{const{width:w}=getComputedStyle(t.editor.view.dom);_.value=parseInt(w,10)},T=()=>{t.editor.commands.setNodeSelection(t.getPos())};Xe(()=>{I()});const A=B({x:0,y:0,w:0,h:0,dir:""}),k=(w,re)=>{w.preventDefault(),w.stopPropagation(),A.value.x=w.clientX,A.value.y=w.clientY;const P=p.value.width,Q=p.value.height,ee=P/Q;let{width:M,height:N}=t.node.attrs;const R=_.value.width;M&&!N?(M=M>R?R:M,N=Math.round(M/ee)):N&&!M?(M=Math.round(N*ee),M=M>R?R:M):!M&&!N?(M=P>R?R:P,N=Math.round(M/ee)):M=M>R?R:M,A.value.w=M,A.value.h=N,A.value.dir=re,$.value=!0,Ge()},x=w=>{if(w.preventDefault(),w.stopPropagation(),!$.value)return;const{x:re,y:P,w:Q,h:ee,dir:M}=A.value,N=(w.clientX-re)*(/l/.test(M)?-1:1),R=(w.clientY-P)*(/t/.test(M)?-1:1);t.updateAttributes({width:Os(Q+N,s,_.value.width),height:Math.max(ee+R,s)})},v=w=>{w.preventDefault(),w.stopPropagation(),$.value&&($.value=!1,A.value={x:0,y:0,w:0,h:0,dir:""},Ke(),T())},Ge=()=>{document.addEventListener("mousemove",x,!0),document.addEventListener("mouseup",v,!0)},Ke=()=>{document.removeEventListener("mousemove",x,!0),document.removeEventListener("mouseup",v,!0)};return(w,re)=>(f(),V(r(St),{as:"span",class:H([r(m),"leading-none max-w-full select-none align-baseline"])},{default:l(()=>[c("figure",rn,[c("div",{class:H(["relative inline-block clear-both max-w-full outline-solid outline-1",{"outline-primary-500":w.selected}])},[c("img",{src:r(h),title:w.node.attrs.title,alt:w.node.attrs.alt,width:r(d),height:r(u),"data-display":w.node.attrs.display,class:"cursor-pointer m-0",onClick:T},null,8,ln),w.editor.isEditable?q((f(),y("div",an,[(f(),y(j,null,Qe(n,P=>c("span",{key:P,class:H(["bg-primary-500 border border-white rounded box-border block h-sm w-sm absolute z-10",{tl:"left-[-6px] top-[-6px] cursor-nwse-resize",tr:"right-[-6px] top-[-6px] cursor-nesw-resize",bl:"left-[-6px] bottom-[-6px] cursor-nesw-resize",br:"right-[-6px] bottom-[-6px] cursor-nwse-resize"}[P]]),onMousedown:Q=>k(Q,P)},null,42,dn)),64))],512)),[[Ye,w.selected||$.value]]):Z("",!0),i(on,{editor:w.editor,node:w.node,selected:w.selected,updateAttributes:w.updateAttributes,deleteNode:w.deleteNode},null,8,["editor","node","selected","updateAttributes","deleteNode"])],2)])]),_:1},8,["class"]))}},cn=Bs.extend({inline(){return!0},group(){return"inline"},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:Ps,parseHTML:t=>{const s=t.style.width||t.getAttribute("width")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({width:t.width})},height:{default:null,parseHTML:t=>{const s=t.style.height||t.getAttribute("height")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({height:t.height})},display:{default:Ns,parseHTML:t=>{const{cssFloat:s,display:o}=t.style;let n=t.getAttribute("data-display")||t.getAttribute("display");return n?n=/(inline|center|left|right)/.test(n)?n:S.INLINE:s==="left"&&!o?n=S.FLOAT_LEFT:s==="right"&&!o?n=S.FLOAT_RIGHT:!s&&o==="center"?n=S.CENTER:n=S.INLINE,n},renderHTML:t=>({["data-display"]:t.display})}}},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!0,urlPattern:Rs}},addNodeView(){return zt(un)},parseHTML(){return[{tag:"img[src]"}]}}),pn={},mn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},hn=c("path",{d:"M17.061,11.22C17.641,10.462,18,9.526,18,8.5C18,6.019,15.981,4,13.5,4H6v15h8c2.481,0,4.5-2.019,4.5-4.5 C18.5,13.203,17.94,12.042,17.061,11.22z M13.5,7C14.327,7,15,7.673,15,8.5S14.327,10,13.5,10H9V7H13.5z M14,16H9v-3h5 c0.827,0,1.5,0.673,1.5,1.5S14.827,16,14,16z"},null,-1),fn=[hn];function gn(e,t){return f(),y("svg",mn,fn)}const _n=z(pn,[["render",gn]]),vn={},bn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},yn=c("path",{d:"M19 7L19 4 9 4 9 7 11.868 7 9.012 17 5 17 5 20 15 20 15 17 12.132 17 14.988 7z"},null,-1),kn=[yn];function wn(e,t){return f(),y("svg",bn,kn)}const $n=z(vn,[["render",wn]]),xn={},An={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Cn=c("path",{d:"M5 18H19V20H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},null,-1),Mn=[Cn];function Ln(e,t){return f(),y("svg",An,Mn)}const Tn=z(xn,[["render",Ln]]),Hn={},Sn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},zn=c("path",{d:"M20 11h-8c-4 0-4-1.816-4-2.5C8 7.882 8 6 12 6c2.8 0 2.99 1.678 3 2.014L16 8h1c0-1.384-1.045-4-5-4C6.584 4 6 7.147 6 8.5c0 .728.148 1.667.736 2.5H4v2h8 5.227H20V11zM12 18c-3.793 0-3.99-1.815-4-2H6c0 .04.069 4 6 4 5.221 0 6-2.819 6-4.5 0-.146-.009-.317-.028-.5h-2.006C15.998 15.2 16 15.376 16 15.5 16 16.184 16 18 12 18z"},null,-1),In=[zn];function Vn(e,t){return f(),y("svg",Sn,In)}const Bn=z(Hn,[["render",Vn]]),En={},On={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},Rn=c("path",{d:"M4 6h2v2H4zm0 5h2v2H4zm0 5h2v2H4zm16-8V6H8.023v2H18.8zM8 11h12v2H8zm0 5h12v2H8z"},null,-1),Pn=[Rn];function Nn(e,t){return f(),y("svg",On,Pn)}const Dn=z(En,[["render",Nn]]),Fn={},qn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Un=c("path",{d:"M5.282 12.064c-.428.328-.72.609-.875.851-.155.24-.249.498-.279.768h2.679v-.748H5.413c.081-.081.152-.151.212-.201.062-.05.182-.142.361-.27.303-.218.511-.42.626-.604.116-.186.173-.375.173-.578 0-.189-.05-.363-.151-.512-.1-.153-.237-.268-.412-.341-.174-.076-.419-.111-.733-.111-.3 0-.537.038-.706.114-.172.078-.302.19-.396.338-.094.143-.159.346-.194.604l.894.076c.025-.188.074-.317.147-.394.072-.073.166-.108.279-.108.11 0 .2.035.272.108.073.071.108.156.108.258 0 .091-.037.19-.108.297C5.711 11.713 5.544 11.865 5.282 12.064zM5.337 18.45c-.114 0-.208-.036-.282-.105-.074-.07-.128-.195-.162-.378L4 18.085c.059.204.142.372.251.506.109.133.248.235.417.306C4.836 18.966 5.067 19 5.36 19c.3 0 .541-.047.725-.14.185-.096.325-.228.424-.403.098-.175.146-.354.146-.544 0-.152-.029-.282-.088-.393-.06-.107-.142-.195-.249-.261-.066-.042-.161-.078-.286-.11.155-.085.268-.183.345-.299.076-.115.113-.24.113-.383 0-.239-.093-.437-.281-.596-.187-.159-.49-.238-.909-.238-.365 0-.648.072-.847.219-.2.143-.334.353-.404.626l.844.151c.023-.162.067-.274.133-.338s.151-.098.257-.098c.103 0 .183.032.241.089.059.06.087.139.087.238 0 .104-.038.193-.117.27s-.177.112-.293.112c-.028 0-.066-.004-.116-.011L5.04 17.54c.123-.036.22-.056.289-.056.132 0 .237.041.313.126.077.082.115.199.115.352 0 .146-.04.266-.119.354C5.558 18.403 5.458 18.45 5.337 18.45zM6.285 8.367V5H5.546C5.451 5.208 5.319 5.383 5.152 5.523 4.984 5.665 4.748 5.785 4.444 5.888v.754C4.65 6.577 4.821 6.509 4.958 6.438c.137-.069.277-.162.423-.276v2.206H6.285zM9 6H20V8H9zM9 11H20V13H9zM9 16H20V18H9z"},null,-1),jn=[Un];function Zn(e,t){return f(),y("svg",qn,jn)}const Gn=z(Fn,[["render",Zn]]),Kn={},Wn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},Jn=c("path",{d:"M3.691 6.292C5.094 4.771 7.217 4 10 4h1v2.819L10.196 6.98c-1.37.274-2.323.813-2.833 1.604C7.05 9.071 6.947 9.591 6.925 10H9h1c.553 0 1 .447 1 1v7c0 1.103-.897 2-2 2H3c-.553 0-1-.447-1-1v-5l.003-2.919C1.994 10.97 1.804 8.34 3.691 6.292zM20 20h-6c-.553 0-1-.447-1-1v-5l.003-2.919c-.009-.111-.199-2.741 1.688-4.789C16.094 4.771 18.217 4 21 4h1v2.819L21.196 6.98c-1.37.274-2.323.813-2.833 1.604C18.05 9.071 17.947 9.591 17.925 10H20h1c.553 0 1 .447 1 1v7C22 19.103 21.103 20 20 20z"},null,-1),Xn=[Jn];function Yn(e,t){return f(),y("svg",Wn,Xn)}const Qn=z(Kn,[["render",Yn]]),eo={},to={viewBox:"0 0 20 20",class:"w-6 h-6 fill-current"},so=c("path",{d:"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"},null,-1),no=c("path",{d:"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"},null,-1),oo=c("path",{d:"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"},null,-1),ro=[so,no,oo];function io(e,t){return f(),y("svg",to,ro)}const lo=z(eo,[["render",io]]),ao={},uo={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},co=c("path",{d:"M4 7h16v2H4zm0-4h16v2H4zm0 8h16v2H4zm0 4h16v2H4zm2 4h12v2H6z"},null,-1),po=[co];function mo(e,t){return f(),y("svg",uo,po)}const ho=z(ao,[["render",mo]]),fo={},go={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},_o=c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},null,-1),vo=[_o];function bo(e,t){return f(),y("svg",go,vo)}const Ue=z(fo,[["render",bo]]),yo={},ko={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"},wo=c("path",{d:"M16.949 14.121 19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0l-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121a2.723 2.723 0 0 1-.844.57L13.414 12l1.414-1.414-.707-.707a4.965 4.965 0 0 0-3.535-1.465c-.235 0-.464.032-.691.066L3.707 2.293 2.293 3.707l18 18 1.414-1.414-5.536-5.536c.277-.184.538-.396.778-.636zm-6.363 3.536a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l1.476-1.475-1.414-1.414L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707z"},null,-1),$o=[wo];function xo(e,t){return f(),y("svg",ko,$o)}const Ao=z(yo,[["render",xo]]),Co=c("label",{for:"href"},"URL",-1),Mo={class:"w-full flex"},Lo={for:"target"},To={value:"_self"},Ho={value:"_blank"},So={__name:"InsertLink",props:{editor:{required:!0}},emits:["insert"],setup(e,{emit:t}){const s=e,o=B(!1),n=B(""),h=B("_self"),d=()=>{o.value=!0;const{href:p,target:_}=s.editor.getAttributes("link");p&&(n.value=p),_&&(h.value=_)},u=()=>{o.value=!1,n.value="",h.value="_self"},a=()=>{s.editor.commands.setLink({href:n.value,target:h.value}),u()},m=()=>{s.editor.chain().focus().unsetLink().run(),u()};return(p,_)=>(f(),y(j,null,[c("button",{onClick:d,class:H([{"is-active":e.editor.isActive("link")},"flex"]),type:"button"},[i(Ue)],2),i(ue,{show:o.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:u},{header:l(()=>[b(g(p.$t("general.insert"))+"/"+g(p.$t("editor.edit_link")),1)]),body:l(()=>[i(O,null,{title:l(()=>[Co]),default:l(()=>[c("div",Mo,[i(te,{type:"text",modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=$=>n.value=$),id:"href",class:"mr-xs"},null,8,["modelValue"]),i(G,{onClick:m,size:"md",disabled:!e.editor.isActive("link")},{icon:l(()=>[i(Ao)]),_:1},8,["disabled"])])]),_:1}),i(O,{class:"mt-lg"},{title:l(()=>[c("label",Lo,g(p.$t("editor.open_link_in")),1)]),default:l(()=>[i(le,{modelValue:h.value,"onUpdate:modelValue":_[1]||(_[1]=$=>h.value=$),id:"target"},{default:l(()=>[c("option",To,g(p.$t("editor.current_window")),1),c("option",Ho,g(p.$t("editor.new_window")),1)]),_:1},8,["modelValue"])]),_:1})]),footer:l(()=>[i(G,{onClick:u,class:"mr-xs"},{default:l(()=>[b(g(p.$t("general.cancel")),1)]),_:1}),i(ne,{onClick:a},{default:l(()=>[b(g(p.$t("general.insert")),1)]),_:1})]),_:1},8,["show"])],64))}},zo={},Io={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current"},Vo=c("path",{d:"M4 11h16v2H4z","fill-rule":"evenodd"},null,-1),Bo=[Vo];function Eo(e,t){return f(),y("svg",Io,Bo)}const Oo=z(zo,[["render",Eo]]),Ro=(e,t,s)=>{const o=e.replace().split(/(?:\r\n?|\n)/),n=[];o.forEach(d=>{const u={type:"paragraph"};d.length>0&&(u.content=[{type:"text",text:d}]);const a=It.fromJSON(t.doc.type.schema,u);n.push(a)});const h=ge.fromArray(n);return Ae.maxOpen(h)},Po={key:0,class:"editorClassicMenu text-stone-800 flex flex-wrap gap-xs border-b border-gray-200 pb-md mb-md"},No={type:"button",class:"w-28 text-left h-full"},Do=c("span",{class:"text-2xl"},"Heading 1",-1),Fo=c("span",{class:"text-xl"},"Heading 2",-1),qo=c("span",{class:"text-lg"},"Heading 3",-1),Uo=c("span",{class:"text-md"},"Heading 4",-1),jo=c("span",{class:"text-base"},"Heading 5",-1),Zo=c("span",{class:"text-sm"},"Heading 6",-1),Go=["disabled"],Ko=["disabled"],Wo=["disabled"],Jo=["disabled"],Xo={type:"button"},Yo={__name:"EditorClassic",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const s=e;et(),B();const o=B(!1),n=Vt({editable:s.editable,content:s.value,extensions:[Ss,zs,Is.configure({types:["heading","paragraph"]}),cn,Bt.configure({openOnClick:!1})],editorProps:{attributes:{class:"focus:outline-none min-h-[150px]"},clipboardTextParser:Ro},onUpdate:()=>{t("update",n.value.getHTML())},onFocus:()=>{o.value=!0},onBlur:()=>{o.value=!1}});tt(()=>{n.value.destroy()}),Se(()=>s.value,u=>{u!==n.value.getHTML()&&n.value.commands.setContent(u)});const h=F(()=>n.value.isActive("heading",{level:1})?"Heading 1":n.value.isActive("heading",{level:2})?"Heading 2":n.value.isActive("heading",{level:3})?"Heading 3":n.value.isActive("heading",{level:4})?"Heading 4":n.value.isActive("heading",{level:5})?"Heading 5":n.value.isActive("heading",{level:6})?"Heading 6":"Paragraph"),d=u=>{n.value.chain().focus().setImage({src:u}).run()};return(u,a)=>{const m=ve("tooltip");return f(),y("div",{class:H([{"border-primary-200 ring ring-primary-200 ring-opacity-50":o.value},"editorClassic border border-gray-200 rounded-md p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[r(n)?(f(),y("div",Po,[i(ze,{"width-classes":"w-40",placement:"bottom-start"},{trigger:l(()=>[c("button",No,g(r(h)),1)]),content:l(()=>[i(D,{onClick:a[0]||(a[0]=p=>r(n).chain().focus().setParagraph().run()),isActive:r(n).isActive("paragraph"),size:"xs",as:"button"},{default:l(()=>[b(" Paragraph ")]),_:1},8,["isActive"]),i(D,{onClick:a[1]||(a[1]=p=>r(n).chain().focus().toggleHeading({level:1}).run()),isActive:r(n).isActive("heading",{level:1}),size:"xs",as:"button"},{default:l(()=>[Do]),_:1},8,["isActive"]),i(D,{onClick:a[2]||(a[2]=p=>r(n).chain().focus().toggleHeading({level:2}).run()),isActive:r(n).isActive("heading",{level:2}),size:"xs",as:"button"},{default:l(()=>[Fo]),_:1},8,["isActive"]),i(D,{onClick:a[3]||(a[3]=p=>r(n).chain().focus().toggleHeading({level:3}).run()),isActive:r(n).isActive("heading",{level:3}),size:"xs",as:"button"},{default:l(()=>[qo]),_:1},8,["isActive"]),i(D,{onClick:a[4]||(a[4]=p=>r(n).chain().focus().toggleHeading({level:4}).run()),isActive:r(n).isActive("heading",{level:4}),size:"xs",as:"button"},{default:l(()=>[Uo]),_:1},8,["isActive"]),i(D,{onClick:a[5]||(a[5]=p=>r(n).chain().focus().toggleHeading({level:5}).run()),isActive:r(n).isActive("heading",{level:5}),size:"xs",as:"button"},{default:l(()=>[jo]),_:1},8,["isActive"]),i(D,{onClick:a[6]||(a[6]=p=>r(n).chain().focus().toggleHeading({level:6}).run()),isActive:r(n).isActive("heading",{level:6}),size:"xs",as:"button"},{default:l(()=>[Zo]),_:1},8,["isActive"])]),_:1}),c("button",{onClick:a[7]||(a[7]=p=>r(n).chain().focus().toggleBold().run()),disabled:!r(n).can().chain().focus().toggleBold().run(),class:H({"is-active":r(n).isActive("bold")}),type:"button"},[i(_n)],10,Go),c("button",{onClick:a[8]||(a[8]=p=>r(n).chain().focus().toggleItalic().run()),disabled:!r(n).can().chain().focus().toggleItalic().run(),class:H({"is-active":r(n).isActive("italic")}),type:"button"},[i($n)],10,Ko),c("button",{onClick:a[9]||(a[9]=p=>r(n).chain().focus().toggleUnderline().run()),disabled:!r(n).can().chain().focus().toggleItalic().run(),class:H({"is-active":r(n).isActive("underline")}),type:"button"},[i(Tn)],10,Wo),c("button",{onClick:a[10]||(a[10]=p=>r(n).chain().focus().toggleStrike().run()),disabled:!r(n).can().chain().focus().toggleStrike().run(),class:H([{"is-active":r(n).isActive("strike")},"mr-sm"]),type:"button"},[i(Bn)],10,Jo),c("button",{onClick:a[11]||(a[11]=p=>r(n).chain().focus().setTextAlign("left").run()),class:H({"is-active":r(n).isActive({textAlign:"left"})}),type:"button"},[i(qe)],2),c("button",{onClick:a[12]||(a[12]=p=>r(n).chain().focus().setTextAlign("center").run()),class:H({"is-active":r(n).isActive({textAlign:"center"})}),type:"button"},[i(Fe)],2),c("button",{onClick:a[13]||(a[13]=p=>r(n).chain().focus().setTextAlign("right").run()),class:H({"is-active":r(n).isActive({textAlign:"right"})}),type:"button"},[i(De)],2),c("button",{onClick:a[14]||(a[14]=p=>r(n).chain().focus().setTextAlign("justify").run()),class:H([{"is-active":r(n).isActive({textAlign:"justify"})},"mr-sm"]),type:"button"},[i(ho)],2),c("button",{onClick:a[15]||(a[15]=p=>r(n).chain().focus().toggleBulletList().run()),class:H({"is-active":r(n).isActive("bulletList")}),type:"button"},[i(Dn)],2),c("button",{onClick:a[16]||(a[16]=p=>r(n).chain().focus().toggleOrderedList().run()),class:H([{"is-active":r(n).isActive("orderedList")},"mr-sm"]),type:"button"},[i(Gn)],2),c("button",{onClick:a[17]||(a[17]=p=>r(n).chain().focus().toggleBlockquote().run()),class:H({"is-active":r(n).isActive("blockquote")}),type:"button"},[i(Qn)],2),q((f(),y("button",{onClick:a[18]||(a[18]=p=>r(n).chain().focus().setHardBreak().run()),type:"button"},[i(lo)])),[[m,u.$t("editor.hard_break")]]),q((f(),y("button",{onClick:a[19]||(a[19]=p=>r(n).chain().focus().setHorizontalRule().run()),class:"mr-sm",type:"button"},[i(Oo)])),[[m,u.$t("editor.horizontal_line")]]),i(Ot,{onUpload:a[20]||(a[20]=p=>{if(p.is_local_driver){d(`/storage/${p.path}`);return}d(p.url)}),class:"flex"},{default:l(()=>[q((f(),y("button",Xo,[i(st)])),[[m,u.$t("post.add_image")]])]),_:1}),i(So,{editor:r(n)},null,8,["editor"])])):Z("",!0),i(r(Et),{editor:r(n),class:"editor-classic-format max-h-96 overflow-y-auto p-xs"},null,8,["editor"])],2)}}},Qo={__name:"Editor",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(f(),V(Yo,{value:e.content.body,onUpdate:s[0]||(s[0]=o=>e.content.body=o)},null,8,["value"]))}},er=c("label",{for:"m_html"},"HTML",-1),tr={__name:"Html",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(f(),V(O,null,{title:l(()=>[er]),default:l(()=>[i(Ee,{id:"m_html",modelValue:e.content.body,"onUpdate:modelValue":s[0]||(s[0]=o=>e.content.body=o),class:"min-h-[350px]"},null,8,["modelValue"])]),_:1}))}},je=()=>({modules:{Editor:{content:{body:""},component:Qo},Html:{content:{body:""},component:tr}}}),sr={class:"flex items-center mb-lg gap-lg"},nr={class:"w-full md:w-1/2"},or={for:"m_name"},rr={class:"w-full md:w-1/2"},ir={for:"m_status"},lr={value:1},ar={value:0},Ze={__name:"FormBlock",props:{form:{required:!0},moduleComponent:{required:!0}},setup(e){return(t,s)=>(f(),y(j,null,[c("div",sr,[c("div",nr,[i(O,null,{title:l(()=>[c("label",or,[b(g(t.$t("general.name"))+" ",1),i(he,{danger:!0},{default:l(()=>[b("*")]),_:1})])]),footer:l(()=>[i(U,{message:e.form.errors.name},null,8,["message"])]),default:l(()=>[i(te,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.name=o),type:"text",id:"m_name",class:"w-full",autofocus:!0,error:e.form.errors.name!==void 0,required:""},null,8,["modelValue","error"])]),_:1})]),c("div",rr,[i(O,null,{title:l(()=>[c("label",ir,g(t.$t("general.status")),1)]),footer:l(()=>[i(U,{message:e.form.errors.status},null,8,["message"])]),default:l(()=>[i(le,{modelValue:e.form.status,"onUpdate:modelValue":s[1]||(s[1]=o=>e.form.status=o),error:e.form.errors.status!==void 0,id:"m_status"},{default:l(()=>[c("option",lr,g(t.$t("general.enabled")),1),c("option",ar,g(t.$t("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1})])]),(f(),V(nt(e.moduleComponent),{content:e.form.content},null,8,["content"]))],64))}},dr={class:"font-semibold capitalize"},ur={class:"mt-xs"},cr={__name:"EditBlock",props:{block:{required:!0,type:Object}},emits:["update","delete"],setup(e,{emit:t}){const s=e,{t:o}=be(),n=J("routePrefix"),h=J("confirmation"),{notify:d}=ke(),{modules:u}=je(),a=B(!1),m=Ie(null),p=ye(oe.exports.cloneDeep(s.block)),_=()=>{const k=u[s.block.module];if(k===void 0){d("error",o("page.module_not_found"));return}m.value=k.component,a.value=!0},$=()=>{a.value=!1,p.reset()},I=()=>{if(!p.isDirty){$();return}h().title(o("page.are_you_sure")).description(o("page.unsaved_will_lost")).btnConfirmName(o("general.discard")).onConfirm(k=>{k.close(),$()}).show()},T=()=>{p.put(route(`${n}.blocks.update`,{block:s.block.id}),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:k=>{const x=k.props.blocks.data.find(v=>v.id===s.block.id);x&&t("update",x),d("success",o("page.block_updated"))}})},A=()=>{h().title(o("page.delete_block")).description(o("page.confirm_delete_block")).destructive().onConfirm(k=>{k.isLoading(!0),Be.delete(route(`${n}.blocks.delete`,{block:s.block.id}),{only:["blocks"],onSuccess(){d("success",o("page.block_deleted")),t("delete"),k.reset(),$()},onFinish(){k.isLoading(!1)}})}).show()};return(k,x)=>(f(),y(j,null,[i(ae,{onClick:_,class:"group-visible"},{icon:l(()=>[i(ot)]),_:1}),i(ue,{show:a.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:I},{header:l(()=>[b(g(r(o)("page.edit_block"))+"[",1),c("span",dr,g(r(p).module),1),b("] ")]),body:l(()=>[c("div",ur,[a.value?(f(),V(Ze,{key:0,form:r(p),moduleComponent:r(m)},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:l(()=>[i(G,{onClick:I,class:"mr-xs"},{default:l(()=>[b(g(r(o)("general.cancel")),1)]),_:1}),i(Ve,{onClick:A,class:"mr-xs"},{default:l(()=>[b(g(r(o)("general.delete")),1)]),_:1}),i(ne,{onClick:T,disabled:r(p).processing,isLoading:r(p).processing},{default:l(()=>[b(g(r(o)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},pr={class:"flex items-center justify-between"},mr={class:"w-full"},hr={class:"flex"},fr={class:"flex"},gr={class:"font-medium"},_r={class:"font-medium text-gray-400"},vr={class:"flex justify-end"},br={class:"flex mr-xs"},yr={__name:"PageAttachedBlocks",props:{modelValue:{required:!0,type:Array}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=(d,u,a)=>{const m=s.modelValue.map(p=>p.id===u?Object.assign(p,Object.assign(a,{random_key:p.random_key===d?d:Oe()})):p);t("update:modelValue",m)},n=d=>{const u=oe.exports.cloneDeep(s.modelValue).filter(a=>a.id!==d);t("update:modelValue",u)},h=d=>{t("update:modelValue",s.modelValue.filter((u,a)=>a!==d))};return(d,u)=>{const a=ve("tooltip");return e.modelValue.length?(f(),V(bt,{key:0},{default:l(()=>[i(r(_t),rt({list:e.modelValue},{animation:200,group:"blocks"},{handle:".handle","item-key":"random_key"}),{item:l(({element:m,index:p})=>[i(vt,{class:"group"},{default:l(()=>[c("div",pr,[c("div",mr,[c("div",hr,[i(ae,{class:"handle mr-xs cursor-move"},{icon:l(()=>[i(qt)]),_:1}),c("div",null,[c("div",fr,[c("div",gr,g(m.name),1)]),c("div",_r,g(m.module),1)])])]),c("div",vr,[m.status?Z("",!0):(f(),V(it,{key:0,variant:"error",class:"mr-xs"},{default:l(()=>[b(g(d.$t("general.disabled")),1)]),_:1})),c("div",br,[i(cr,{block:m,onDelete:_=>n(m.id),onUpdate:_=>o(m.random_key,m.id,_)},null,8,["block","onDelete","onUpdate"])]),q((f(),V(ae,{onClick:_=>h(p),destructive:!0,class:"group-visible"},{icon:l(()=>[i(we)]),_:2},1032,["onClick"])),[[a,d.$t("page.remove_from_page")]])])])]),_:2},1024)]),_:1},16,["list"])]),_:1})):(f(),V(Re,{key:1},{default:l(()=>[b(g(d.$t("page.page_no_blocks_added")),1)]),_:1}))}}},kr={class:"relative"},wr={__name:"AddExistingBlock",props:{modelValue:{required:!0,type:Array},blocks:{required:!0,type:Object,default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=B(!1),n=B(null),h=F(()=>s.blocks.data.map(p=>({key:p.id,label:p.name}))),d=()=>{const p=s.blocks.data.find(_=>_.id===n.value.key);return p?oe.exports.cloneDeep(p):null},u=()=>{const p=d();!p||(t("update:modelValue",[...s.modelValue,Object.assign(p,{random_key:Oe()})]),m())},a=()=>{o.value=!0},m=()=>{o.value=!1,n.value=null};return(p,_)=>{const $=lt("v-select");return f(),y(j,null,[i(G,{onClick:a,size:"sm",class:"mr-xs"},{icon:l(()=>[i(Ue)]),default:l(()=>[b(" "+g(p.$t("page.add_existing_block")),1)]),_:1}),i(ue,{show:o.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:m},{header:l(()=>[b(g(p.$t("page.add_existing_block")),1)]),body:l(()=>[c("div",kr,[r(h).length?(f(),y(j,{key:0},[o.value?(f(),V($,{key:0,modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=I=>n.value=I),options:r(h),filterable:!1,clearable:!1,"close-on-select":!0,placeholder:p.$t("page.search_blocks"),"append-to-body":""},{"no-options":l(({search:I,searching:T,loading:A})=>[b(g(p.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])):Z("",!0)],64)):(f(),V(Re,{key:1},{default:l(()=>[b(g(p.$t("page.no_blocks_created")),1)]),_:1}))])]),footer:l(()=>[i(G,{onClick:m,class:"mr-xs"},{default:l(()=>[b(g(p.$t("general.cancel")),1)]),_:1}),r(h).length?(f(),V(ne,{key:0,onClick:u,disabled:!n.value},{default:l(()=>[b(g(p.$t("page.add_to_page")),1)]),_:1},8,["disabled"])):Z("",!0)]),_:1},8,["show"])],64)}}},$r={class:"font-semibold capitalize"},xr={class:"mt-xs"},Ar={__name:"CreateBlock",emits:["add"],setup(e,{emit:t}){const{t:s}=be(),o=J("routePrefix"),n=J("confirmation"),{notify:h}=ke(),{modules:d}=je(),u=B(!1),a=Ie(null),m=ye({name:"",module:null,content:{},status:1}),p=T=>{const A=d[T];if(A===void 0){h("error",s("page.module_not_found"));return}a.value=A.component,m.content=oe.exports.cloneDeep(A.content),m.module=T,u.value=!0},_=()=>{u.value=!1,m.reset()},$=()=>{if(!m.isDirty){_();return}n().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(T=>{T.close(),_()}).show()},I=()=>{m.post(route(`${o}.blocks.store`),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:T=>{t("add",T.props.blocks.data[0]),_(),h("success",s("page.block_created")+`
`+s("page.save_page"))}})};return(T,A)=>(f(),y(j,null,[i(ze,{"width-classes":"w-32",placement:"bottom"},{trigger:l(()=>[i(G,{size:"sm",class:"mr-xs"},{icon:l(()=>[i(at)]),default:l(()=>[b(" "+g(r(s)("page.create_block")),1)]),_:1})]),content:l(()=>[i(D,{as:"button",onClick:A[0]||(A[0]=k=>p("Editor"))},{default:l(()=>[b(" Editor ")]),_:1}),i(D,{as:"button",onClick:A[1]||(A[1]=k=>p("Html"))},{default:l(()=>[b(" Html ")]),_:1})]),_:1}),i(ue,{show:u.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:$},{header:l(()=>[b(g(r(s)("page.create_block"))+" [",1),c("span",$r,g(r(m).module),1),b("] ")]),body:l(()=>[c("div",xr,[u.value?(f(),V(Ze,{key:0,form:r(m),moduleComponent:r(a)},null,8,["form","moduleComponent"])):Z("",!0)])]),footer:l(()=>[i(G,{onClick:$,class:"mr-xs"},{default:l(()=>[b(g(r(s)("general.cancel")),1)]),_:1}),i(ne,{onClick:I,disabled:r(m).processing,isLoading:r(m).processing},{default:l(()=>[b(g(r(s)("page.create_add_to_page")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Cr={class:"flex items-center mt-lg"},Mr={__name:"PageBlocks",props:{page:{required:!0,type:Object}},setup(e){const t=e,s=o=>{t.page.blocks.push(o)};return(o,n)=>(f(),y("div",null,[i(yr,{modelValue:e.page.blocks,"onUpdate:modelValue":n[0]||(n[0]=h=>e.page.blocks=h)},null,8,["modelValue"]),c("div",Cr,[i(wr,{modelValue:e.page.blocks,"onUpdate:modelValue":n[1]||(n[1]=h=>e.page.blocks=h),blocks:o.$page.props.blocks},null,8,["modelValue","blocks"]),i(Ar,{onAdd:s})])]))}},Lr={class:"row-py mb-2xl w-full mx-auto"},Tr={key:0,class:"flex"},Hr=["href"],Sr={class:"row-px"},zr=["onSubmit"],Ir={class:"flex gap-lg"},Vr={class:"w-2/3"},Br={for:"name"},Er={for:"meta_title"},Or={for:"meta_description"},Rr={class:"w-1/3"},Pr={for:"slug"},Nr=["innerHTML"],Dr={for:"layout"},Fr={value:"default"},qr={value:"medium"},Ur={value:"small"},jr={for:"status"},Zr={value:1},Gr={value:0},Kr={class:"flex items-center mt-lg"},Wr=dt({layout:pt}),_i=Object.assign(Wr,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},page:{type:[Object,null]}},setup(e){const t=e,{t:s}=be(),{notify:o}=ke(),n=J("routePrefix"),h=J("confirmation"),d=F(()=>u.value?s("page.create_page"):s("page.edit_page")),{isCreate:u,isEdit:a}=mt(),m=ye(a.value?oe.exports.cloneDeep(t.page):{name:"",meta_title:"",meta_description:"",slug:"",layout:"default",status:1,blocks:[]}),p=()=>{Se(()=>t.page.blocks,k=>{m.blocks=k})};a.value&&p();const _=()=>{m.slug=t.page.slug},$=k=>{k.post(route(`${n}.pages.store`),{onSuccess:()=>{_(),o("success",s("page.page_created"))}})},I=k=>{k.put(route(`${n}.pages.update`,{page:t.page.uuid}),{preserveScroll:!0,onSuccess:()=>{_(),o("success",s("page.page_updated"))}})},T=()=>{h().title(s("page.delete_page")).description(s("page.confirm_delete_page")).destructive().onConfirm(k=>{k.isLoading(!0),Be.delete(route(`${n}.pages.delete`,{page:t.page.uuid}),{preserveScroll:!0,onSuccess(){o("success",s("page.page_deleted"))},onFinish(){k.reset()}})}).show()},A=()=>{const k=m.transform(x=>({...x,blocks:x.blocks.map(v=>v.id)}));u.value&&$(k),a.value&&I(k)};return(k,x)=>(f(),y(j,null,[i(r(ct),{title:r(d)},null,8,["title"]),c("div",Lr,[i(ht,{title:r(d)},{description:l(()=>[b(g(r(s)("page.page_desc")),1)]),default:l(()=>[r(a)?(f(),y("div",Tr,[c("a",{href:k.route(`${r(n)}.pages.show`,{slug:e.page.url_path}),target:"_blank",class:"mr-xs"},[i(G,{size:"sm"},{icon:l(()=>[i(ft)]),default:l(()=>[b(" "+g(r(s)("general.open")),1)]),_:1})],8,Hr),i(Ve,{onClick:T,size:"sm"},{icon:l(()=>[i(we)]),_:1})])):Z("",!0)]),_:1},8,["title"]),c("div",Sr,[c("form",{method:"post",onSubmit:ut(A,["prevent"])},[c("div",Ir,[c("div",Vr,[i(pe,null,{title:l(()=>[b(g(r(s)("general.details")),1)]),default:l(()=>[i(O,null,{title:l(()=>[c("label",Br,[b(g(r(s)("general.name"))+" ",1),i(he,{danger:!0},{default:l(()=>[b("*")]),_:1})])]),footer:l(()=>[i(U,{message:r(m).errors.name},null,8,["message"])]),default:l(()=>[i(te,{modelValue:r(m).name,"onUpdate:modelValue":x[0]||(x[0]=v=>r(m).name=v),error:r(m).errors.name!==void 0,type:"text",id:"name",class:"w-full",autofocus:r(u),required:""},null,8,["modelValue","error","autofocus"])]),_:1}),i(O,{class:"mt-lg"},{title:l(()=>[c("label",Er,g(r(s)("page.meta_title")),1)]),footer:l(()=>[i(U,{message:r(m).errors.meta_title},null,8,["message"])]),default:l(()=>[i(te,{modelValue:r(m).meta_title,"onUpdate:modelValue":x[1]||(x[1]=v=>r(m).meta_title=v),error:r(m).errors.meta_title!==void 0,type:"text",id:"meta_title",class:"w-full"},null,8,["modelValue","error"])]),_:1}),i(O,{class:"mt-lg"},{title:l(()=>[c("label",Or,g(r(s)("page.meta_description")),1)]),footer:l(()=>[i(U,{message:r(m).errors.meta_description},null,8,["message"])]),default:l(()=>[i(Ee,{modelValue:r(m).meta_description,"onUpdate:modelValue":x[2]||(x[2]=v=>r(m).meta_description=v),error:r(m).errors.meta_description!==void 0,id:"meta_description",class:"w-full"},null,8,["modelValue","error"])]),_:1})]),_:1}),i(pe,{class:"mt-lg"},{title:l(()=>[b(g(r(s)("general.blocks")),1)]),default:l(()=>[i(Mr,{page:r(m)},null,8,["page"])]),_:1})]),c("div",Rr,[i(pe,null,{default:l(()=>[i(O,null,{title:l(()=>[c("label",Pr,[b(g(r(s)("page.url_path"))+" ",1),i(he,{danger:!0},{default:l(()=>[b("*")]),_:1}),c("span",{innerHTML:r(s)("page.type_home"),class:"text-sm text-gray-400 inline-block ml-xs font-normal"},null,8,Nr)])]),footer:l(()=>[i(U,{message:r(m).errors.slug},null,8,["message"])]),default:l(()=>[i(te,{modelValue:r(m).slug,"onUpdate:modelValue":x[3]||(x[3]=v=>r(m).slug=v),error:r(m).errors.slug!==void 0,type:"text",id:"slug",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),i(O,{class:"mt-lg"},{title:l(()=>[c("label",Dr,g(r(s)("page.container_width")),1)]),footer:l(()=>[i(U,{message:r(m).errors.layout},null,8,["message"])]),default:l(()=>[i(le,{modelValue:r(m).layout,"onUpdate:modelValue":x[4]||(x[4]=v=>r(m).layout=v),error:r(m).errors.layout!==void 0,id:"layout"},{default:l(()=>[c("option",Fr,g(r(s)("general.default")),1),c("option",qr,g(r(s)("page.medium")),1),c("option",Ur,g(r(s)("page.small")),1)]),_:1},8,["modelValue","error"])]),_:1}),i(O,{class:"mt-lg"},{title:l(()=>[c("label",jr,g(r(s)("general.status")),1)]),footer:l(()=>[i(U,{message:r(m).errors.status},null,8,["message"])]),default:l(()=>[i(le,{modelValue:r(m).status,"onUpdate:modelValue":x[5]||(x[5]=v=>r(m).status=v),error:r(m).errors.status!==void 0,id:"status"},{default:l(()=>[c("option",Zr,g(r(s)("general.enabled")),1),c("option",Gr,g(r(s)("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1}),c("div",Kr,[i(ne,{type:"submit",disabled:r(m).processing,isLoading:r(m).processing},{default:l(()=>[b(g(r(u)?r(s)("general.create"):r(s)("general.update")),1)]),_:1},8,["disabled","isLoading"])])]),_:1})])])],40,zr)])])],64))}});export{_i as default};
