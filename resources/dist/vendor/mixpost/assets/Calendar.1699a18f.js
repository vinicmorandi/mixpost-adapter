import{cf as x,cg as T,ch as F,ci as ue,cj as Se,ck as Q,O as h,o as l,c as d,t as S,b as f,a as c,w as O,h as A,i as L,e as m,l as C,F as M,a2 as Z,p as $e,n as V,cl as me,H as N,r as xe,aL as X,f as q,j as be,k as j,a3 as Oe,cm as b,E as B,V as ye,cn as P,ac as ee,A as pe,co as ae,cp as Me,a7 as re,cq as ne,a8 as Te,au as Ce,a6 as oe,Z as qe,bq as le}from"./app.a05b4c5c.js";import{u as fe}from"./useSettings.3c9a095f.js";import{_ as z}from"./PureButton.7cf07808.js";import{a as ve,C as he}from"./ChevronLeft.727e7cc4.js";import{p as W,C as Ze}from"./ChevronDown.8c397a78.js";import{W as _e}from"./constants.9689ba33.js";import{u as Fe}from"./usePostVersions.2acb12a0.js";import{_ as Ie}from"./ProviderIcon.9a25a410.js";import{_ as ie,a as Ne}from"./VerticallyScrollableContent.528227ae.js";import{_ as je,a as Pe}from"./PostsFilter.5e61cfd7.js";import"./Variable.40ae6e15.js";import"./index.a09b91eb.js";import"./Panel.05e9bba5.js";import"./EditorReadOnly.903d5559.js";import"./Alert.49de0ead.js";import"./Refresh.62a08e2e.js";import"./SearchInput.296daeed.js";import"./Input.44809a08.js";import"./NoResult.b8d4ef7e.js";import"./ArrowTopRightOnSquare.a67b2cfb.js";import"./ColorPicker.b4d23b31.js";import"./Trash.83ab4124.js";import"./PureButtonLink.21473f96.js";import"./EllipsisVertical.0bda3946.js";import"./Checkbox.12b1be22.js";function U(t,e){x(2,arguments);var s=T(t),a=F(e);return isNaN(a)?new Date(NaN):(a&&s.setDate(s.getDate()+a),s)}function te(t,e){x(2,arguments);var s=T(t),a=F(e);if(isNaN(a))return new Date(NaN);if(!a)return s;var n=s.getDate(),r=new Date(s.getTime());r.setMonth(s.getMonth()+a+1,0);var o=r.getDate();return n>=o?r:(s.setFullYear(r.getFullYear(),r.getMonth(),n),s)}function se(t,e){var s,a,n,r,o,y,u,g;x(1,arguments);var w=ue(),k=F((s=(a=(n=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(y=o.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:w.weekStartsOn)!==null&&a!==void 0?a:(u=w.locale)===null||u===void 0||(g=u.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&s!==void 0?s:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=T(t),p=_.getDay(),v=(p<k?7:0)+p-k;return _.setDate(_.getDate()-v),_.setHours(0,0,0,0),_}var We=6e4;function E(t,e){x(2,arguments);var s=F(e);return Se(t,s*We)}function ge(t,e){x(2,arguments);var s=F(e),a=s*7;return U(t,a)}function de(t){x(1,arguments);var e=T(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Ve(t,e){var s,a,n,r,o,y,u,g;x(1,arguments);var w=ue(),k=F((s=(a=(n=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(y=o.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:w.weekStartsOn)!==null&&a!==void 0?a:(u=w.locale)===null||u===void 0||(g=u.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&s!==void 0?s:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=T(t),p=_.getDay(),v=(p<k?-7:0)+6-(p-k);return _.setDate(_.getDate()+v),_.setHours(23,59,59,999),_}function J(t){x(1,arguments);var e=T(t),s=e.getDate();return s}function Ae(t){x(1,arguments);var e=T(t),s=e.getDay();return s}function Be(t){x(1,arguments);var e=T(t),s=e.getFullYear(),a=e.getMonth(),n=new Date(0);return n.setFullYear(s,a+1,0),n.setHours(0,0,0,0),n.getDate()}function He(t){x(1,arguments);var e=T(t),s=e.getHours();return s}function K(t){x(1,arguments);var e=T(t),s=e.getMonth();return s}function Ye(t){x(1,arguments);var e=T(t),s=e.getMonth();return e.setFullYear(e.getFullYear(),s+1,0),e.setHours(0,0,0,0),e}function G(t){return x(1,arguments),T(t).getFullYear()}function ze(t,e){x(2,arguments);var s=F(e);return U(t,-s)}function we(t,e){x(2,arguments);var s=F(e);return te(t,-s)}function Ee(t,e){x(2,arguments);var s=F(e);return ge(t,-s)}const Le={class:"text-gray-700 font-semibold text-lg"},Ue={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0}},setup(t){const e=t,{translatedFormat:s}=Q(),a=h(()=>s(e.selectedDate,"MMMM yyyy"));return(n,r)=>(l(),d("div",Le,S(f(a)),1))}},Re={class:"flex items-center"},Ke={class:"flex items-center"},Ge={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(t,{emit:e}){const s=t,a=()=>{let o=de(we(s.selectedDate,1));e("dateSelected",o)},n=()=>{const o=typeof s.currentDate=="string"?W(s.currentDate):s.currentDate;e("dateSelected",o)},r=()=>{let o=de(te(s.selectedDate,1));e("dateSelected",o)};return(o,y)=>(l(),d("div",Re,[c(L,{onClick:n,class:"mr-xs"},{default:O(()=>[A(S(o.$t("calendar.today")),1)]),_:1}),m("div",Ke,[c(z,{onClick:a,class:"mr-xs"},{default:O(()=>[c(ve)]),_:1}),c(z,{onClick:r},{default:O(()=>[c(he)]),_:1})])]))}},Je={class:"grid grid-cols-7"},Qe={class:"hidden sm:block"},Xe={class:"block sm:hidden"},et={__name:"Weekdays",props:{weekStartsOn:{required:!1,type:Number,default:0}},setup(t){const e=t,s=h(()=>{const a=C.exports.clone(_e);return a.splice(e.weekStartsOn?0:6).concat(a)});return(a,n)=>(l(),d("div",Je,[(l(!0),d(M,null,Z(f(s),(r,o)=>(l(),d("div",{key:o,class:"p-sm border-t border-r last:border-r-0 border-gray-200 text-center font-semibold"},[m("span",Qe,S(a.$t(`calendar.weekdays.${r.key}.short`)),1),m("span",Xe,S(a.$t(`calendar.weekdays.${r.key}.shortest`)),1)]))),128))]))}},tt={},st={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},at=m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),rt=[at];function nt(t,e){return l(),d("svg",st,rt)}const ot=$e(tt,[["render",nt]]),lt={key:0,class:"flex flex-col h-full"},it={class:"w-full h-full p-1 md:p-sm bg-white"},dt={class:"text-left text-sm md:text-base"},ct={key:0,class:"flex flex-wrap gap-xs items-center mt-xs"},ut={class:"flex items-center justify-between mt-xs"},mt={class:"flex items-center text-gray-500"},yt={class:"text-sm"},pt={class:"mr-xs"},ke={__name:"CalendarPostItem",props:{item:{type:Object,required:!0}},setup(t){const e=t,s=V("calendarFilter"),{timeFormat:a}=fe(),{getOriginalVersion:n,getAccountVersion:r}=Fe(),o=h(()=>{if(!e.item.versions.length)return{excerpt:""};let _=e.item.accounts;s.value.accounts.length&&(_=_.filter(i=>s.value.accounts.includes(i.id)));const p=_.map(i=>{const D=r(e.item.versions,i.id);return D?D.content[0]:n(e.item.versions).content[0]});return{excerpt:(p.length?p[0]:e.item.versions[0].content[0]).excerpt}}),y=h(()=>C.exports.uniqBy(e.item.accounts,"provider")),u=h(()=>a===12?me(e.item.scheduled_at.time):e.item.scheduled_at.time),g=N(!1),w=()=>{g.value=!0},k=()=>{g.value=!1};return(_,p)=>{const v=xe("tooltip");return l(),d(M,null,[m("div",{class:"w-full relative flex rounded-md overflow-hidden border border-gray-200 hover:border-primary-500 transition-colors ease-in-out duration-200",onClick:w,role:"button","aria-pressed":"false",tabindex:"0"},[t.item.tags.length?(l(),d("div",lt,[(l(!0),d(M,null,Z(t.item.tags,i=>(l(),d("div",{class:"w-sm h-full first:rounded-tl-md last:rounded-bl-md",style:X({backgroundColor:i.hex_color})},null,4))),256))])):q("",!0),m("div",it,[m("div",dt,S(f(o).excerpt),1),f(y).length?(l(),d("div",ct,[(l(!0),d(M,null,Z(f(y),i=>(l(),d("div",{key:i.id},[be(c(Ie,{provider:i.provider,class:"!w-4 !h-4"},null,8,["provider"]),[[v,`${i.name}`]])]))),128))])):q("",!0),m("div",ut,[m("div",mt,[c(ot,{class:"hidden md:block mr-1 !w-5 !h-5"}),m("span",yt,S(f(u)),1)]),c(ie,{value:t.item.status,showName:!1,class:"hidden md:block"},null,8,["value"])])])]),c(Oe,{show:g.value,scrollableBody:!0,onClose:k},{body:O(()=>[c(ie,{value:t.item.status,class:"mb-lg"},null,8,["value"]),g.value?(l(),j(Ne,{key:0,accounts:t.item.accounts,versions:t.item.versions},null,8,["accounts","versions"])):q("",!0)]),footer:O(()=>[g.value?(l(),d(M,{key:0},[m("div",pt,[c(je,{"item-id":t.item.id},null,8,["item-id"])]),c(L,{onClick:k},{default:O(()=>[A(S(_.$t("general.close")),1)]),_:1})],64)):q("",!0)]),_:1},8,["show"])],64)}}},De="/vendor/mixpost/assets/calendar-disabled-item.e7fcf298.svg",ft={class:"absolute w-full top-0 left-0 mt-xs text-center"},vt={key:0,class:"absolute mt-xs right-0 mr-sm opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},ht={key:1,class:"mt-xl pb-xl h-full overflow-hidden"},_t={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},gt={class:"flex flex-wrap space-y-xs w-full"},wt={__name:"MonthDayItem",props:{day:{type:Object,required:!0},isToday:{type:Boolean,default:!1},timeZone:{required:!1,type:String,default:"UTC"}},setup(t){const e=t,s=V("workspaceCtx"),a=h(()=>b(new Date(`${e.day.date}T00:00:00`),"d")),n=h(()=>e.day.isDisabled?{backgroundImage:`url('${De}')`}:{}),r=()=>{const o=P.utcToZonedTime(new Date().toISOString(),e.timeZone);let y=`${e.day.date} ${b(o,"HH:mm")}`;ee.visit(route("mixpost.posts.create",{workspace:s.id,schedule_at:y}))};return(o,y)=>(l(),d("div",{class:"relative min-h-[100px] overflow-hidden bg-white border-r border-b border-gray-200 group",style:X(f(n))},[m("div",ft,[m("span",{class:B(["w-7 h-7 inline-flex items-center justify-center p-1 mr-xs rounded-full text-gray-700",{"bg-primary-500 text-white":t.isToday,"text-gray-400":t.day.isDisabled}])},S(f(a)),3)]),t.day.isDisabled?q("",!0):(l(),d("div",vt,[m("button",{onClick:r,type:"button",class:"text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[c(ye)])])),t.day.posts.length?(l(),d("div",ht,[m("div",_t,[m("div",gt,[(l(!0),d(M,null,Z(t.day.posts,u=>(l(),j(ke,{key:u.id,item:u},null,8,["item"]))),128))])])])):q("",!0)],4))}},kt={class:"bg-white"},Dt={class:"flex flex-col md:flex-row md:items-center md:justify-between p-lg"},St={class:"flex items-center space-x-xs mb-xs md:mb-0"},$t={class:"calendar-month-height grid grid-cols-7 relative border-t border-t-gray-200"},xt={__name:"CalendarMonth",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:t=>b(P.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(t,{emit:e}){const s=t,a=N(new Date(`${s.initialDate}T00:00:00`)),n=h(()=>[...g.value,...w.value,...k.value]),r=h(()=>b(P.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")),o=h(()=>(K(a.value)+1).toString().padStart(2,"0")),y=h(()=>G(a.value)),u=h(()=>Be(a.value)),g=h(()=>{const i=_(w.value[0].date),D=i?i-s.weekStartsOn:s.weekStartsOn?6:0,$=J(ze(new Date(`${w.value[0].date}T00:00:00`),D)),I=we(a.value,1);return[...Array(D)].map((H,Y)=>{const R=new Date(`${G(I)}-${(K(I)+1).toString().padStart(2,"0")}-${($+Y).toString().padStart(2,"0")}T00:00:00`);return{date:b(R,"yyyy-MM-dd"),isDisabled:ae(R,s.timeZone),posts:p(R)}})}),w=h(()=>[...Array(u.value)].map((i,D)=>{const $=new Date(`${y.value}-${o.value}-${(D+1).toString().padStart(2,"0")}T00:00:00`);return{date:b($,"yyyy-MM-dd"),isDisabled:ae($,s.timeZone),posts:p($)}})),k=h(()=>{const i=_(Ye(a.value)),D=i&&(s.weekStartsOn?7:6)-i,$=te(a.value,1);return[...Array(D)].map((I,H)=>{const Y=new Date(`${G($)}-${(K($)+1).toString().padStart(2,"0")}-${(H+1).toString().padStart(2,"0")}T00:00:00`);return{date:b(Y,"yyyy-MM-dd"),isDisabled:!1,posts:p(Y)}})}),_=i=>Ae(typeof i=="string"?new Date(`${i}T00:00:00`):i),p=i=>s.posts.filter(D=>b(i,"yyyy-MM-dd")===D.scheduled_at.date),v=i=>{a.value=i,e("dateSelected",i)};return(i,D)=>(l(),d("div",kt,[m("div",Dt,[m("div",St,[c(Ge,{"current-date":f(r),"selected-date":a.value,onDateSelected:v},null,8,["current-date","selected-date"]),c(Ue,{"selected-date":a.value},null,8,["selected-date"])]),pe(i.$slots,"header")]),c(et,{weekStartsOn:t.weekStartsOn},null,8,["weekStartsOn"]),m("div",$t,[(l(!0),d(M,null,Z(f(n),$=>(l(),j(wt,{key:$.date,day:$,isToday:$.date===f(r),timeZone:t.timeZone},null,8,["day","isToday","timeZone"]))),128))])]))}},bt={class:"text-gray-700 font-semibold text-lg"},Ot={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0},weekStartsOn:{required:!1,type:Number,default:0}},setup(t){const e=t,{translatedFormat:s}=Q(),a=h(()=>{const n=se(e.selectedDate,{weekStartsOn:e.weekStartsOn}),r=Ve(e.selectedDate,{weekStartsOn:e.weekStartsOn});return`${s(n,"MMM do")} - ${s(r,"MMM do")}`});return(n,r)=>(l(),d("div",bt,S(f(a)),1))}},Mt={class:"flex items-center"},Tt={class:"flex items-center"},Ct={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(t,{emit:e}){const s=t,a=()=>{let o=Ee(s.selectedDate,1);e("dateSelected",o)},n=()=>{const o=typeof s.currentDate=="string"?W(s.currentDate):s.currentDate;e("dateSelected",o)},r=()=>{let o=ge(s.selectedDate,1);e("dateSelected",o)};return(o,y)=>(l(),d("div",Mt,[c(L,{onClick:n,class:"mr-xs"},{default:O(()=>[A(S(o.$t("calendar.today")),1)]),_:1}),m("div",Tt,[c(z,{onClick:a,class:"mr-xs"},{default:O(()=>[c(ve)]),_:1}),c(z,{onClick:r},{default:O(()=>[c(he)]),_:1})])]))}},qt={class:"flex flex-row sticky top-0 bg-white z-10"},Zt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Ft=m("div",null,null,-1),It={class:"text-base md:text-xl"},Nt={class:"hidden sm:block"},jt={class:"block sm:hidden"},Pt={__name:"Weekdays",props:{timeZone:{required:!1,type:String,default:"UTC"},weekStartsOn:{required:!1,type:Number,default:0},selectedDate:{type:Date,required:!0},scrolled:{type:Boolean,required:!1,default:!1}},setup(t){const e=t,s=h(()=>se(e.selectedDate,{weekStartsOn:e.weekStartsOn})),a=h(()=>J(P.utcToZonedTime(new Date().toISOString(),e.timeZone))),n=h(()=>{const r=C.exports.clone(_e);return r.splice(e.weekStartsOn?0:6).concat(r).map((y,u)=>{const g=u===0?s.value:U(s.value,u),w=J(g);return Object.assign(y,{date:w,isToday:a.value===w})})});return(r,o)=>(l(),d("div",qt,[m("div",Zt,[Ft,(l(!0),d(M,null,Z(f(n),(y,u)=>(l(),d("div",{key:u,class:B([{"text-primary-500":y.isToday,"border-b-gray-200":t.scrolled,"border-b-white":!t.scrolled},"p-xs border-t border-b border-l border-gray-200 text-center font-semibold"])},[m("div",It,S(y.date),1),m("span",{class:B({"text-gray-500":!y.isToday})},[m("span",Nt,S(r.$t(`calendar.weekdays.${y.key}.short`)),1),m("span",jt,S(r.$t(`calendar.weekdays.${y.key}.shortest`)),1)],2)],2))),128))])]))}},Wt={key:0,class:"absolute mt-xs right-0 mr-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},Vt={class:"mr-xs text-sm"},At={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},Bt={class:"flex flex-wrap space-y-xs w-full"},Ht={__name:"WeekDayTimeItem",props:{dateSlot:{type:String,required:!0},timeSlot:{type:String,required:!0},minuteSlot:{type:Object,required:!0},timeZone:{required:!1,type:String,default:"UTC"},timeFormat:{required:!1,type:Number,default:12},posts:{type:Array,required:!0}},setup(t){const e=t,s=V("workspaceCtx"),{translatedFormat:a}=Q(),n=h(()=>{const u=E(W(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.end);return Me(u,e.timeZone)}),r=h(()=>{const u=E(W(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.start);return a(u,`${e.timeFormat===12?"h:mm aaa":"H:mm"}`)}),o=h(()=>n.value?{backgroundImage:`url('${De}')`}:{}),y=()=>{let u=`${e.dateSlot} ${e.timeSlot}`;const g=P.utcToZonedTime(new Date().toISOString(),e.timeZone);`${b(g,"yyyy-MM-dd")} ${He(g)}:00`===u&&(u=b(g,"yyyy-MM-dd H:mm")),ee.visit(route("mixpost.posts.create",{workspace:s.id,schedule_at:u}))};return(u,g)=>(l(),d("div",{class:"relative min-h-[50px] group",style:X(f(o))},[f(n)?q("",!0):(l(),d("div",Wt,[m("button",{onClick:y,type:"button",class:"flex items-center text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[m("span",Vt,S(f(r)),1),c(ye)])])),t.posts.length?(l(),d("div",{key:1,class:B([{"mt-lg":!f(n)},"h-full overflow-hidden"])},[m("div",At,[m("div",Bt,[(l(!0),d(M,null,Z(t.posts,w=>(l(),j(ke,{key:w.id,item:w},null,8,["item"]))),128))])])],2)):q("",!0)],4))}},Yt={class:"bg-white"},zt={class:"flex flex-col md:flex-row md:items-center md:justify-between p-lg"},Et={class:"flex items-center space-x-xs mb-xs md:mb-0"},Lt={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Ut={class:"text-center text-gray-400 text-sm font-semibold"},Rt={__name:"CalendarWeek",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:t=>b(P.utcToZonedTime(new Date().toISOString(),t.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},timeFormat:{required:!1,type:Number,default:12},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(t,{emit:e}){const s=t,a=N(new Date(s.initialDate)),n=h(()=>b(P.utcToZonedTime(new Date().toISOString(),s.timeZone),"yyyy-MM-dd")),r=h(()=>se(a.value,{weekStartsOn:s.weekStartsOn})),o=h(()=>C.exports.range(7).map(p=>{const v=p===0?r.value:U(r.value,p);return b(v,"yyyy-MM-dd")})),y=h(()=>{let p=[];for(let v=0;v<24;v++){const i=(v+":00").padStart(5,"0");p.push({12:me(i,"h aaa"),24:i})}return p}),u=[{start:0,end:59}],g=(p,v,i)=>s.posts.filter(D=>{const $=b(E(W(`${p} ${v}`),i.start),"kk:mm"),I=b(E(W(`${p} ${v}`),i.end),"kk:mm");return p===D.scheduled_at.date&&D.scheduled_at.time>=$&&D.scheduled_at.time<=I}),w=p=>{a.value=p,e("dateSelected",p)},k=N(!1),_=C.exports.throttle(p=>{k.value=p.target.scrollTop>0},100);return(p,v)=>(l(),d("div",Yt,[m("div",zt,[m("div",Et,[c(Ct,{currentDate:f(n),selectedDate:a.value,onDateSelected:w},null,8,["currentDate","selectedDate"]),c(Ot,{selectedDate:a.value,weekStartsOn:t.weekStartsOn},null,8,["selectedDate","weekStartsOn"])]),pe(p.$slots,"header")]),m("div",{onScroll:v[0]||(v[0]=(...i)=>f(_)&&f(_)(...i)),class:"calendar-week-height-sm md:calendar-week-height-md xl:calendar-week-height overflow-y-auto"},[c(Pt,{timeZone:t.timeZone,weekStartsOn:t.weekStartsOn,selectedDate:a.value,scrolled:k.value},null,8,["timeZone","weekStartsOn","selectedDate","scrolled"]),m("div",Lt,[(l(!0),d(M,null,Z(f(y),i=>(l(),d(M,null,[(l(),d(M,null,Z(u,(D,$)=>(l(),d(M,null,[m("div",Ut,S($===0?i[t.timeFormat]:""),1),(l(!0),d(M,null,Z(f(o),(I,H)=>(l(),d("div",{key:H,class:B([{"!border-t-gray-100":$!==0},"grid grid-cols-1 border-l border-t border-gray-200 text-center bg-white"])},[c(Ht,{dateSlot:I,timeSlot:i[24],minuteSlot:D,timeZone:t.timeZone,timeFormat:t.timeFormat,posts:g(I,i[24],D)},null,8,["dateSlot","timeSlot","minuteSlot","timeZone","timeFormat","posts"])],2))),128))],64))),64))],64))),256))])],32)]))}},Kt={class:"inline-block mr-xs"},Gt={__name:"CalendarSwitchType",setup(t){const e=V("calendarType"),s=a=>{e.value=a};return(a,n)=>(l(),j(Te,{"width-classes":"w-32",placement:"bottom"},{trigger:O(()=>[c(L,{size:"sm"},{default:O(()=>[m("span",Kt,S(f(e)==="month"?a.$t("calendar.month"):a.$t("calendar.week")),1),c(Ze)]),_:1})]),content:O(()=>[c(re,{as:"button",onClick:n[0]||(n[0]=r=>s("month"))},{default:O(()=>[c(ne,{class:"!w-5 !h-5 mr-1"}),A(" "+S(a.$t("calendar.month")),1)]),_:1}),c(re,{as:"button",onClick:n[1]||(n[1]=r=>s("week"))},{default:O(()=>[c(ne,{class:"!w-5 !h-5 mr-1"}),A(" "+S(a.$t("calendar.week")),1)]),_:1})]),_:1}))}},Jt={class:"flex items-center space-x-md"},ce={__name:"CalendarToolbar",setup(t){const e=V("calendarFilter");return(s,a)=>(l(),d("div",Jt,[c(Pe,{modelValue:f(e),"onUpdate:modelValue":a[0]||(a[0]=n=>Ce(e)?e.value=n:null)},null,8,["modelValue"]),c(Gt)]))}},Ss={__name:"Calendar",props:{posts:{required:!0,type:Object},type:{required:!0,type:String},selected_date:{required:!0,type:[String,Date]},filter:{type:Object,default:{}}},setup(t){const e=t,s=V("workspaceCtx"),{timeZone:a,timeFormat:n,weekStartsOn:r}=fe(),o=N(e.type),y=N(e.selected_date),u=N({keyword:e.filter.keyword,status:e.filter.status,tags:e.filter.tags,accounts:e.filter.accounts});le("calendarType",o),le("calendarFilter",u);const g=h(()=>o.value==="month"),w=h(()=>o.value==="week"),k=v=>{const i=b(v,"yyyy-MM-dd");y.value=i,p(Object.assign({date:i},C.exports.pickBy(u.value)))};oe(o,()=>{_(Object.assign({date:y.value,type:o.value},C.exports.pickBy(u.value)))}),oe(()=>C.exports.cloneDeep(u.value),C.exports.throttle(()=>{_(Object.assign({date:y.value},C.exports.pickBy(u.value)))},300));const _=v=>{ee.get(route("mixpost.calendar",Object.assign({workspace:s.id},v)),{},{preserveState:!0,only:["posts"]})},p=C.exports.throttle(v=>{_(v)},300);return(v,i)=>(l(),d(M,null,[c(f(qe),{title:v.$t("post.schedule")},null,8,["title"]),f(g)?(l(),j(xt,{key:0,initialDate:y.value,weekStartsOn:f(r),timeZone:f(a),posts:t.posts.data,onDateSelected:k},{header:O(()=>[c(ce)]),_:1},8,["initialDate","weekStartsOn","timeZone","posts"])):q("",!0),f(w)?(l(),j(Rt,{key:1,initialDate:y.value,weekStartsOn:f(r),timeZone:f(a),timeFormat:f(n),posts:t.posts.data,onDateSelected:k},{header:O(()=>[c(ce)]),_:1},8,["initialDate","weekStartsOn","timeZone","timeFormat","posts"])):q("",!0)],64))}};export{Ss as default};
