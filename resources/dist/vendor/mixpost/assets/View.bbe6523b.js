import{n as y,H as C,l as R,af as H,o as k,c as b,a as e,w as t,h as r,t as o,S as j,T as B,V as J,b as s,i as S,_ as L,a3 as N,F as U,J as P,k as V,a2 as Z,e as _,c8 as G,ae as K,j as Q,a8 as X,a7 as A,ab as D,ac as q,r as Y,d as ee,Z as te,q as O,m as se,aL as ae}from"./app.a05b4c5c.js";import{_ as oe}from"./Admin.7fa4ba78.js";import{_ as le}from"./PageHeader.044c6731.js";import{_ as E}from"./Panel.05e9bba5.js";import{_ as T}from"./HorizontalGroup.97d4c34e.js";import{T as F}from"./Trash.83ab4124.js";import{_ as re}from"./NoResult.b8d4ef7e.js";import{_ as ne}from"./DropdownButton.8d634dd9.js";import{a as z,_ as f,T as ce}from"./TableCell.8aafd44e.js";import{_ as W}from"./UserRole.22e974f3.js";import{E as ie}from"./Eye.bdca2e42.js";import{_ as ue}from"./PureButtonLink.21473f96.js";import{A as de}from"./ArrowTopRightOnSquare.a67b2cfb.js";import"./Flex.513e8e8d.js";import"./PureButton.7cf07808.js";import"./EllipsisVertical.0bda3946.js";import"./Radio.cc3f4ee6.js";const me={class:"relative"},pe={__name:"SelectUser",props:{modelValue:{default:null},users:{type:Array,default:[]},exclude:{type:Array,default:[]},filter:{type:Object,default:{}}},emits:["update:modelValue"],setup(n,{emit:g}){const a=n,v=y("routePrefix"),d=C(a.users),i=(l,c)=>{!l||(c(!0),h(c,l))},h=R.exports.throttle((l,c)=>{axios.get(route(`${v}.users.resources.items`),{params:Object.assign({keyword:c,exclude:a.exclude},a.filter)}).then(m=>{l(!1),d.value=m.data.data.map(w=>({key:w.id,label:w.name}))})},350);return(l,c)=>{const m=H("v-select");return k(),b("div",me,[e(m,{modelValue:n.modelValue,"onUpdate:modelValue":c[0]||(c[0]=w=>l.$emit("update:modelValue",w)),options:d.value,filterable:!1,"close-on-select":!0,placeholder:l.$t("user.type_search_user"),onSearch:i},{"no-options":t(({search:w,searching:x,loading:u})=>[r(o(l.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])])}}},fe={__name:"AttachUser",props:{workspace:{type:Object},attachedUsers:{type:Array,default:[]}},setup(n){const g=n,{t:a}=j();y("routePrefix");const{notify:v}=P(),d=C(null),i=B({user_id:null,role:"admin"}),h=()=>{i.transform(w=>({...w,user_id:d.value.key})).post(route("mixpost.workspaces.users.store",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){m(),i.reset(),v("success",a("team.user_attached"))}})},l=C(!1),c=()=>{l.value=!0},m=()=>{l.value=!1,d.value=null};return(w,x)=>(k(),b(U,null,[e(S,{onClick:c,size:"sm"},{default:t(()=>[e(J,{class:"mr-xs"}),r(" "+o(s(a)("team.attach")),1)]),_:1}),e(N,{show:l.value,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:m},{header:t(()=>[r(o(s(a)("team.attach_user")),1)]),body:t(()=>[e(pe,{modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=u=>d.value=u),exclude:n.attachedUsers},null,8,["modelValue","exclude"]),e(W,{modelValue:s(i).role,"onUpdate:modelValue":x[1]||(x[1]=u=>s(i).role=u),class:"mt-lg"},null,8,["modelValue"])]),footer:t(()=>[e(S,{onClick:m,class:"mr-xs"},{default:t(()=>[r(o(s(a)("general.cancel")),1)]),_:1}),e(L,{onClick:h,disabled:!d.value||s(i).processing,isLoading:s(i).processing},{default:t(()=>[r(o(s(a)("team.attach")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},_e={class:"flex justify-start"},he={class:"capitalize"},we={class:"flex justify-end"},ke={__name:"WorkspaceUsers",props:{workspace:{type:Object}},setup(n){const g=n,{t:a}=j(),v=y("routePrefix"),d=y("confirmation"),{notify:i}=P(),h=C(null),l=B({user_id:null,role:"admin"}),c=u=>{l.user_id=u.id,l.role=u.pivot.role,h.value=u},m=()=>{h.value=null,l.reset()},w=u=>{d().title("Detach user").description(`Are you sure you want to detach <strong>${u.name}</strong> from <strong>${g.workspace.name}</strong>?`).destructive().btnConfirmName(a("general.detach")).onConfirm($=>{$.isLoading(!0),q.delete(route("mixpost.workspaces.users.delete",{workspace:g.workspace.uuid}),{data:{user_id:u.id},preserveScroll:!0,onSuccess(){$.reset(),i("success",a("team.user_detached"))},onFinish(){$.isLoading(!1)}})}).show()},x=()=>{l.put(route("mixpost.workspaces.users.update",{workspace:g.workspace.uuid}),{preserveScroll:!0,onSuccess(){l.reset(),m(),i("success",a("team.role_updated"))}})};return(u,$)=>{const I=Y("tooltip");return k(),b(U,null,[e(E,null,{title:t(()=>[r("Users")]),action:t(()=>[e(fe,{workspace:n.workspace,attachedUsers:n.workspace.users.map(p=>p.id)},null,8,["workspace","attachedUsers"])]),default:t(()=>[n.workspace.users.length?(k(),V(ce,{key:0},{head:t(()=>[e(z,null,{default:t(()=>[e(f,{component:"th",scope:"col"}),e(f,{component:"th",scope:"col"},{default:t(()=>[r(o(s(a)("general.name")),1)]),_:1}),e(f,{component:"th",scope:"col"},{default:t(()=>[r(o(s(a)("general.email")),1)]),_:1}),e(f,{component:"th",scope:"col"},{default:t(()=>[r(o(s(a)("team.role")),1)]),_:1}),e(f,{component:"th",scope:"col"},{default:t(()=>[r(o(s(a)("team.attached_at")),1)]),_:1}),e(f,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(k(!0),b(U,null,Z(s(R.exports.sortBy)(n.workspace.users,"pivot.joined_at"),p=>(k(),V(z,{key:n.workspace.id,hoverable:!0},{default:t(()=>[e(f,{align:"left"},{default:t(()=>[_("div",_e,[e(G,{name:p.name},null,8,["name"])])]),_:2},1024),e(f,null,{default:t(()=>[r(o(p.name),1)]),_:2},1024),e(f,null,{default:t(()=>[r(o(p.email),1)]),_:2},1024),e(f,null,{default:t(()=>[e(K,null,{default:t(()=>[_("span",he,o(p.pivot.role),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[r(o(p.pivot.joined_at),1)]),_:2},1024),e(f,{align:"right"},{default:t(()=>[_("div",we,[Q((k(),V(ue,{href:u.route(`${s(v)}.users.view`,{user:p.id}),class:"mr-xs"},{default:t(()=>[e(ie)]),_:2},1032,["href"])),[[I,s(a)("general.view")]]),e(X,{"width-classes":"w-32",placement:"bottom-end"},{trigger:t(()=>[e(ne)]),content:t(()=>[e(A,{onClick:M=>c(p),as:"button"},{default:t(()=>[e(D,{class:"mr-xs"}),r(" "+o(s(a)("team.edit_role")),1)]),_:2},1032,["onClick"]),e(A,{onClick:M=>w(p),as:"button"},{default:t(()=>[e(F,{class:"text-red-500 mr-xs"}),r(" "+o(s(a)("general.detach")),1)]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(k(),V(re,{key:1}))]),_:1}),e(N,{show:h.value!==null,"max-width":"md","scrollable-body":!0,closeable:!0,onClose:m},{header:t(()=>[r(o(s(a)("team.edit_role_for"))+" ",1),_("strong",null,o(h.value.name),1)]),body:t(()=>[e(W,{modelValue:s(l).role,"onUpdate:modelValue":$[0]||($[0]=p=>s(l).role=p),class:"mt-lg"},null,8,["modelValue"])]),footer:t(()=>[e(S,{onClick:m,class:"mr-xs"},{default:t(()=>[r(o(s(a)("general.cancel")),1)]),_:1}),e(L,{onClick:x,disabled:s(l).processing,isLoading:s(l).processing},{default:t(()=>[r(o(s(a)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64)}}},ge={class:"w-full mx-auto max-w-6xl row-py"},ve={class:"flex items-center"},xe={class:"row-px"},$e={class:"md:max-w-2xl"},ye={class:"mt-lg"},be=ee({layout:oe}),Fe=Object.assign(be,{__name:"View",props:{workspace:{type:Object}},setup(n){const g=n,{t:a}=j(),v=y("routePrefix"),d=y("confirmation"),i=a("workspace.view_workspace"),{notify:h}=P(),l=()=>{d().title(a("workspace.delete_workspace")).description(a("workspace.confirm_delete_workspace")).destructive().onConfirm(c=>{c.isLoading(!0),q.delete(route(`${v}.workspaces.delete`,{workspace:g.workspace.uuid}),{onSuccess(){h("success",a("workspace.workspace_deleted"))}})}).show()};return(c,m)=>(k(),b(U,null,[e(s(te),{title:s(i)},null,8,["title"]),_("div",ge,[e(le,{title:s(i)},{description:t(()=>[r(o(n.workspace.name),1)]),default:t(()=>[_("div",ve,[e(s(O),{href:c.route("mixpost.switchWorkspace",{workspace:n.workspace.uuid,redirect:!0}),method:"post",as:"button",type:"button",class:"mr-xs"},{default:t(()=>[e(S,{size:"sm"},{icon:t(()=>[e(de)]),default:t(()=>[r(" "+o(s(a)("general.open")),1)]),_:1})]),_:1},8,["href"]),e(s(O),{href:c.route(`${s(v)}.workspaces.edit`,{workspace:n.workspace.uuid}),class:"mr-xs"},{default:t(()=>[e(L,{size:"sm"},{icon:t(()=>[e(D)]),default:t(()=>[r(" "+o(s(a)("general.edit")),1)]),_:1})]),_:1},8,["href"]),e(se,{onClick:l,size:"sm"},{icon:t(()=>[e(F)]),_:1})])]),_:1},8,["title"]),_("div",xe,[e(E,null,{title:t(()=>[r(o(s(a)("general.details")),1)]),default:t(()=>[_("div",$e,[e(T,null,{title:t(()=>[r(o(s(a)("general.name")),1)]),default:t(()=>[_("div",null,o(n.workspace.name),1)]),_:1}),e(T,{class:"mt-lg"},{title:t(()=>[r(o(s(a)("general.color")),1)]),default:t(()=>[_("div",{style:ae({background:n.workspace.hex_color}),class:"w-xl h-xl rounded-md"},null,4)]),_:1})])]),_:1}),_("div",ye,[e(ke,{workspace:n.workspace},null,8,["workspace"])])])])],64))}});export{Fe as default};
