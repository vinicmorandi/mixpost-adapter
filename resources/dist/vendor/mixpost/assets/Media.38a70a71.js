import{H as b,O as y,c as x,a as t,b as i,e as p,w as a,cd as O,F as D,n as S,o as c,Z as A,a2 as E,k as _,h as l,t as r,P as F,i as P,V as M,j as z,f as H,m as Z,ac as q,r as G}from"./app.a05b4c5c.js";import{u as J}from"./usePostVersions.2acb12a0.js";import{u as K,_ as Q,a as R,b as U}from"./MediaGifs.adeff4b7.js";import{_ as W}from"./PageHeader.044c6731.js";import{T as X,_ as Y}from"./Tab.af6a2b17.js";import{_ as ee}from"./SelectableBar.c8863131.js";import{_ as se}from"./PureDangerButton.9adab555.js";import{_ as te}from"./Panel.05e9bba5.js";import{T as ae}from"./Trash.83ab4124.js";import"./index.browser.8e74d592.js";import"./Masonry.cd3ab109.js";import"./MediaFile.a2421f6b.js";import"./ExclamationCircle.df2493b4.js";import"./SearchInput.296daeed.js";import"./Input.44809a08.js";import"./NoResult.b8d4ef7e.js";import"./Alert.49de0ead.js";import"./Flex.513e8e8d.js";const oe={class:"max-w-6xl w-full mx-auto row-py mb-2xl"},ie={class:"w-full row-px"},le={class:"w-full row-px mt-lg"},Pe={__name:"Media",setup(re){const v=S("workspaceCtx"),{activeTab:n,tabs:T,isDownloading:$,isDeleting:w,downloadExternal:V,deletePermanently:h}=K("mixpost.media.fetchStock",{workspace:v.id}),L={uploads:Q,stock:R,gifs:U},d=b(),B=y(()=>L[n.value]),u=y(()=>d.value?d.value.selected:[]),k=()=>{d.value.deselectAll()},N=()=>{const e=n.value!=="uploads";e&&V(u.value.map(s=>{const{id:f,url:o,download_data:C}=s;return{id:f,url:o,download_data:C}}),s=>{g(s.data)}),e||g(u.value)},{versionContentObject:j}=J(),g=e=>{q.post(route("mixpost.posts.store",{workspace:v.id}),{versions:[{account_id:0,is_original:!0,content:[j("",e.map(s=>s.id))]}]})},m=b(!1),I=()=>{const e=u.value.map(s=>s.id);h(e,()=>{k(),d.value.removeItems(e),m.value=!1})};return(e,s)=>{const f=G("tooltip");return c(),x(D,null,[t(i(A),{title:e.$t("media.media_library")},null,8,["title"]),p("div",oe,[t(W,{title:e.$t("media.media_library")},null,8,["title"]),p("div",ie,[t(X,null,{default:a(()=>[(c(!0),x(D,null,E(i(T),o=>(c(),_(Y,{key:o,onClick:C=>n.value=o,active:i(n)===o},{default:a(()=>[l(r(e.$t(`media.${o}`)),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),p("div",le,[t(te,null,{default:a(()=>[(c(),_(F(i(B)),{ref_key:"sourceProperties",ref:d,columns:4},null,512)),t(ee,{count:i(u).length,onClose:s[1]||(s[1]=o=>k())},{default:a(()=>[t(P,{onClick:N,isLoading:i($),disabled:i($),class:"mr-sm",size:"xs"},{default:a(()=>[t(M,{class:"mr-xs"}),l(" "+r(e.$t("media.create_post")),1)]),_:1},8,["isLoading","disabled"]),i(n)==="uploads"?z((c(),_(se,{key:0,onClick:s[0]||(s[0]=o=>m.value=!0)},{default:a(()=>[t(ae)]),_:1})),[[f,e.$t("general.delete")]]):H("",!0)]),_:1},8,["count"])]),_:1})])]),t(O,{show:m.value,variant:"danger",onClose:s[3]||(s[3]=o=>m.value=!1)},{header:a(()=>[l(r(e.$t("media.delete_media")),1)]),body:a(()=>[l(r(e.$t("media.do_you_want_delete")),1)]),footer:a(()=>[t(P,{onClick:s[2]||(s[2]=o=>m.value=!1),class:"mr-xs"},{default:a(()=>[l(r(e.$t("general.cancel")),1)]),_:1}),t(Z,{isLoading:i(w),disabled:i(w),onClick:I},{default:a(()=>[l(r(e.$t("general.delete")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{Pe as default};
