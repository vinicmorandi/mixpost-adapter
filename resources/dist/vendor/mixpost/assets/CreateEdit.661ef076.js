import{d as O,S as B,W as F,O as P,T as z,c as g,a as r,b as e,e as n,w as a,g as I,_ as L,F as M,o as h,Z as A,q as D,i as J,h as m,t as l,m as W,f as y,n as $,ac as Z,J as G}from"./app.a05b4c5c.js";import{u as H}from"./usePageMode.6e127e36.js";import{_ as K}from"./Admin.7fa4ba78.js";import{_ as Q}from"./PageHeader.044c6731.js";import{_ as k}from"./Panel.05e9bba5.js";import{_ as f}from"./HorizontalGroup.97d4c34e.js";import{_ as w}from"./Error.4aa59f2e.js";import{_ as S}from"./Input.44809a08.js";import{_ as U}from"./Radio.cc3f4ee6.js";import{E as R}from"./Eye.bdca2e42.js";import{T as X}from"./Trash.83ab4124.js";import{_ as q}from"./InputHidden.3ebb63fe.js";import"./Flex.513e8e8d.js";import"./PureButton.7cf07808.js";const Y={class:"row-py mb-2xl w-full sm:max-w-3xl mx-auto"},ee={key:0,class:"flex"},se={class:"row-px"},re=["onSubmit"],ae={for:"name"},te={for:"email"},oe={class:"flex items-center space-x-sm"},le={key:0},ie={for:"password"},ne={for:"password_confirmation"},de=O({layout:K}),$e=Object.assign(de,{__name:"CreateEdit",props:{mode:{type:String,default:"create"},user:{type:Object}},setup(_){const c=_,{t}=B(),b=$("routePrefix"),C=$("confirmation"),{notify:v}=G(),{user:x}=F(),V=P(()=>p.value?t("user.create_user"):"Edit user"),{isCreate:p,isEdit:d}=H(),s=z({name:d.value?c.user.name:"",email:d.value?c.user.email:"",is_admin:d.value?c.user.is_admin:!1,password:"",password_confirmation:""}),E=()=>{s.post(route("mixpost.users.store"),{preserveScroll:!0,preserveState:!0})},N=()=>{s.put(route("mixpost.users.update",{user:c.user.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const u=[t("user.user_has_been_updated"),t("auth.password_has_been_changed")];v("success",s.password?u.join(`
`):u[0])}})},T=()=>{p.value&&E(),d.value&&N()},j=()=>{C().title(t("user.delete_user")).description(t("user.confirm_delete_user")).destructive().onConfirm(u=>{u.isLoading(!0),Z.delete(route(`${b}.users.delete`,{user:c.user.id}),{onSuccess(o){o.props.flash.error||v("success",t("user.delete_user"))},onFinish(){u.isLoading(!1)}})}).show()};return(u,o)=>(h(),g(M,null,[r(e(A),{title:e(V)},null,8,["title"]),n("div",Y,[r(Q,{title:e(V)},{default:a(()=>[e(d)?(h(),g("div",ee,[r(e(D),{href:u.route(`${e(b)}.users.view`,{user:_.user.id}),class:"mr-xs"},{default:a(()=>[r(J,{size:"sm"},{icon:a(()=>[r(R)]),default:a(()=>[m(" "+l(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),r(W,{onClick:j,size:"sm"},{icon:a(()=>[r(X)]),_:1})])):y("",!0)]),_:1},8,["title"]),n("div",se,[n("form",{method:"post",onSubmit:I(T,["prevent"])},[r(k,null,{title:a(()=>[m(l(e(t)("user.user_details")),1)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",ae,l(e(t)("general.name")),1)]),footer:a(()=>[r(w,{message:e(s).errors.name},null,8,["message"])]),default:a(()=>[r(S,{modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).name=i),error:e(s).errors.name,type:"text",id:"name",class:"w-full",autofocus:"",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-md"},{title:a(()=>[n("label",te,l(e(t)("general.email")),1)]),footer:a(()=>[r(w,{message:e(s).errors.email},null,8,["message"])]),default:a(()=>[r(S,{modelValue:e(s).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(s).email=i),error:e(s).errors.email,type:"email",id:"email",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("user.system_admin")),1)]),default:a(()=>[n("div",oe,[n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[2]||(o[2]=i=>e(s).is_admin=i),value:!1,disabled:e(d)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.no")),1)]),n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[3]||(o[3]=i=>e(s).is_admin=i),value:!0,disabled:e(d)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.yes")),1)])])]),_:1})]),_:1}),r(k,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("auth.password")),1)]),description:a(()=>[e(d)?(h(),g("span",le,l(e(t)("auth.leave_blank_password")),1)):y("",!0)]),default:a(()=>[r(f,{class:"mt-md"},{title:a(()=>[n("label",ie,l(e(t)("auth.password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password},null,8,["message"])]),default:a(()=>[r(q,{modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=i=>e(s).password=i),error:e(s).errors.password,id:"password",required:e(p),autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1}),r(f,{class:"mt-md"},{title:a(()=>[n("label",ne,l(e(t)("auth.confirm_password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password_confirmation},null,8,["message"])]),default:a(()=>[r(q,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=i=>e(s).password_confirmation=i),error:e(s).errors.password_confirmation,id:"password_confirmation",required:!!e(s).password,autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1})]),_:1}),r(L,{type:"submit",disabled:e(s).processing,class:"mt-lg"},{default:a(()=>[m(l(e(p)?e(t)("general.create"):e(t)("general.update")),1)]),_:1},8,["disabled"])],40,re)])])],64))}});export{$e as default};
